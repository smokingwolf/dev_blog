<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>片道勇者2 【4】 状況チェック！</title>
<script>
function toggle(id){
 var e=document.getElementById(id);
 if(e.style.display==='none'){e.style.display='block';}else{e.style.display='none';}
}
</script>
</head>
<body>
<h1>片道勇者2 【4】 状況チェック！</h1>
<div>2017-09-09 12:41:44</div>
<div><span style="font-size:large;"><strong>【片道勇者2　進んだ内容】</strong></span>

今週はみっちり『片道勇者2』の開発を進めました。
今回は、これまでの経過を復習してみようと思います。

<hr size="1" />
<span style="font-size:large;"><strong>【現在の目的は？】</strong></span>

ひとまず目指しているのは『片道勇者2』の「基本システムの完成」で、
そこまで終わったらアルファ版として、公開範囲はまだ決めていませんが
一定数の人にお試ししていただこうかなと考えています。

たぶん、各データ1～2個ずつのつまらない状態のゲームなので、
面白さを味わえる段階ではありません。
挙動のチェックや、今のうちに取り入れておいた方がいいフィードバックの獲得、
基礎難易度のチェック、通信機能の実験、初めての人がどんなプレイをするかの確認、
どこが説明不足かを把握する、などが主な目的になると思います。

<img src="//silversecond.net/data/p_diary4/20170909.jpg" border="1" title="だいぶ画面ラフの通りになってきました">
<span style="font-size:x-small;">※現在のゲーム画面、ほぼ以前公開した<a href="http://silversecond.net/data/p_diary4/20170617B.jpg" class="blue">画面ラフ</a>に近い状態になってきました。</span>

<hr size="1" />
<span style="font-size:large;"><strong>【ここ数ヶ月の実装内容】</strong></span>

ということで、5月20日頃にお知らせした進捗リストから現在までの実装内容をご紹介！
（無数にあった）あまりに細かい調整などは抜いてますが、
おおよそこのような感じになっています。
ウディコン含め脇の仕事が色々あったので、
それを抜くと実作業時間で2.7ヶ月分くらいでしょうか。

<span style="color:#CC0000">・主人公用のHP・ST・行動力ゲージ表示処理、カードを選ぶと減りが分かったりするように。

・主人公の基本情報枠の実装（左下の装備やら覚醒回数やら名前が載ってる場所、画像は仮）。

・スキルカードを色々作成。効果を実現するためのコマンド処理も色々追加。
→　ちょっと強い攻撃や補助スキルや簡単なパッシブスキルなど。

・戦闘周りの基本処理を実装。ここは長かった！　RPGの戦闘は、
最もデータベース処理が集中する場所ですからね。

・アイテムをいくつか作成、効果を実現するためのコマンド処理も色々追加

・マップ自動生成処理の初期版作成、今のところは幅が変わる
緑一面の世界が一定距離分作られるだけ。

・マウスカーソル処理。今回は映像だけからでも押したのが分かるように。

・カード使用処理、装備は投げるか装備するかの分岐も。

・装備変更処理、装備消耗処理。地味に複雑で管理が大変なところです。
付与システムはまだ実装していません。

・レベルアップ画面の処理。今回のレベルアップ処理は前回とだいぶ違います。

・ショップの取引画面の処理、地味に面倒臭いところ！

・NPCと会話できる機能の実装。

・各種システムメッセージ表示処理の実装。

・「闇」もとい強制スクロール処理を実装。前回はただ画面外に出たらアウトなので
楽だったんですが、今回は画面内に映ってるので意外と手間がかかりました。

・地帯の基本設定処理。「地帯別のランダムテーブルの生成」が主ですが、
データベースだけで処理しようとするとこれまた手間がかかる！
しかし、おかげで今回は新たな地形を増やしやすいはずです。
（※前回はコモンイベント内で手打ちでランダムテーブルを作ってた）

・「自動攻撃処理」を実装、敵をクリックしただけで攻撃に使えるカードを
使えるだけ自動選択してくれて、もう一回敵をクリックすると攻撃できます。
→　ほどほどに賢くするのに苦労しましたが、今のところそれなりに使えます。

・想定ダメージ表示処理を実装。カードを選んで敵にカーソルを合わせると、
与えられる想定ダメージが出てきます。

・財布に入る分からお金があふれると、お金がアイテムに変わる処理を実装。
→　またいずれ詳細をお話ししますが、今回は財布に限度があります。

・ここまでで出た膨大なバグをいったん修正。

・敵のHPゲージが見える処理を実装。今作ではHPが分かる「狩人」以外でも、
敵に一度ダメージを与えると、残りHPの具体的な値が分かります。

・マップ処理に致命的な問題があることが発覚したので対処。
ここまで来てチップサイズの変更が求められるという地獄！
調整だけで無駄に一週間くらいかかりました。

・「壁」を実装！　壁は『片道勇者1』の1マス占有のものと違って
「ヘクスの間に立っている」んですが、内部処理が複雑で地獄を見ました。
→　壁をすり抜けたり、壊したはずの壁にダメージが入り続けたり、
攻撃判定の射程が正しくふさがれなかったり、敵だけこっちを殴れるのに
こっちが壁向こうの敵を殴れなかったりして「アアー！」ってなっていました。

・「マップの拡大縮小表示」機能を実装
　→　以前共同開発した人に少し触ってもらったら
「ホイール回しても何もないんですね……拡大縮小とかしないんです？」
という要望が出てしまったので血の汗を流しながら拡大縮小を搭載したところ、
縮小表示すると非常にプレイアビリティが上がってしまったので
やはり視界が広いのは正義だと思いました（※上の画面の状態から縮小できます）。

・この辺で第9回ウディコンに半月～0.75ヶ月分くらいの労力を投入。

・敵が一定距離に入ったら「！」と表示して操作が一時停止する、
『片道勇者プラス』にもあった機能を実装！
これがないとやっぱり敵に突っ込みがちですし、
常に注意力コストを支払うことになるので遊ぶのも気疲れします。

・通常画面に細々としたサブ情報を表示する処理を追加。
→　次のレベルアップ内容や次の目標や世界名や到達距離など。普通。

・『片道勇者1』のイーリスのガイド用メッセージで使われていた
ぼやーんとしたメッセージ表示処理を実装。

・ここまでの内容で、遊びやすさを増すために必要な
インターフェース的微調整とバグ取りをいろいろ行いました。

・画面端のキーヘルプ表示機能を実装。地味に大事。

・タイトル画面とワールド選択画面のボタン処理と汎用スクロール処理を実装。
次はキャラメイク画面！　デザインは昨日考えたところです。
</span>
<img src="//silversecond.net/data/p_diary4/20170909A.jpg" border="1">
<span style="font-size:x-small;">※キャラメイク画面のデザインラフ、前作から一部切り貼り。</span>

という感じです。まだまだやることが残っていますが、
マップ画面での最低要素は8割9割がた、実装し終わった段階です。

今回は後で直しやすいよう設計をしっかり作っているのに加え、
この段階で「前作にあったインターフェース的配慮」をすでに放り込み始めているため、
なかなか前と同じスピードというわけにはいかない感じです。
（2なのですから、1にあった親切設計くらいはきっと全部入ってて当然と思われるでしょう。
ただ『片道勇者プラス』のインターフェース調整だけでも確か3～4ヶ月はかかりましたからね！）

2倍くらいで間に合うと思っていましたが、既知の細かい配慮を突っ込んでいると
かける時間が2倍でも前と同じところまで行けない！　なるべく急ぎます。

<hr size="1" />
<span style="font-size:large;"><strong>【何が残ってる？】</strong></span>

いま残っていると思われる「基本システム」に必要な内容は以下の通りです。
もちろん、思い出すごとにどんどん増えます！

<span style="color:#3300FF"><strong>・タイトル周りの処理の完成

・キャラメイク画面の実装

・ＴIPS（ローディング）画面の実装

・ゲーム終了時の評価画面　＋　各種解放処理

・次元倉庫の実装　→　今回どういう仕様にしましょうかね……。

・会話選択肢の実装

・仲間ＮＰＣとの会話機能（立ち絵が表示されたりするアレ）
今回は画面左に顔アイコンが出て、ときどきピコッとテーマが表示されたりしつつ、
いつでも話ができるようにしようかなと考えています。

・街やダンジョンの設置処理　……と表には出ませんがマップエディタの作成。
『片道勇者1』でも施設パーツ作成用のマップエディタをゲーム内に作ってました、
これがないといろいろ作るのが大変です。

・マップ自動生成処理の完成

・装備の付与システムの実装

・NPCが1ヘクスに複数体まとまって登場する処理（内部処理がちょっと複雑そう）

・通信機能の実験

・クエスト進行のために必要なシステムを考える。

・他、忘れてるもの全部</strong></span>

というわけで、今後も地道に開発を進めていきます！
なお、ここまで作っている限りでは、かなりいけそうな雰囲気が出ているので、
「プロトタイプ」呼ばわりはそろそろ脱してもいいかもしれません。

主な仕組みは前作より圧倒的に楽しそうで、データが1～2個しかない状態でも
動かしてるだけで程々に面白い（※前作のアルファと比べて）という快挙なので、
あとは、最終的に面白く作れるかどうかは、
私のバランス感覚や発想力次第かなと見込んでいます。

バランスについてはこれまでほとんど意図を持てておらず、感覚で作ってきただけなので、
今回こそ「面白くするための仮説」を立てて攻める必要があるでしょう。
いろいろ思いついたら、また開発日誌にまとめてみたいと考えています。

<hr size="1" />
以下は気になった拍手コメントへの返信です。いつも本当にありがとうございます！

<span style="color:#3300FF"><strong>＞デッキシステムで取捨選択迫るとなると、 武器の重量タイプとは
＞別に所持量にかかわる「重量」は廃止になるんでしょうかね？　.
＞無くすと性能の差別化の材料が減りそうですが。　　　　　　　　　.</strong></span>

重量システム周りは、実はまだしっかり考えてない部分だったりします。
「最大アイテム所持数」だけ設定して重量自体は全部「１」とするか、
あるいは前回同様に重量を差別化するか、デッキ限界までは無数に持てるのか、
その辺りはまだ決めかねているところです。

「基本はどのアイテムも所持枠1で済むが、重い装備はアイテム枠を2～3つ使う」
など、そういう方式でもいいかもしれません。
今回は、なるべく細かい計算をしなくて済むようにしたいなと考えています。

また、「所持重量」周りで「面白み」や「プレイの意図」を生むためのアイデアも考え中です。
ある程度制限をゆるくして重量があふれても平気なようにして、
所持枠に空きが多いほどボーナスが付く、所持枠をオーバーするとペナルティがかかる、
というシステムにしてもいいかな、などとも考え中です。

アイテムを持ちすぎている状態でも動ける方が面倒臭くなくていいでしょうし、
重量オーバーによる弱体化を承知で荷物をいっぱい抱えて
街まで向かうのはそれはそれでスリルがあって楽しそうです。

一方、「そもそも重量制限いるのか？」という方向性も、
しっかり悩んでみるべきだと思っています。色々考えていきます。</div>

</body>
</html>