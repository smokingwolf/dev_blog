<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>片道勇者2開発+6　ギルド依頼や新機能</title>
<script>
function toggle(id){
 var e=document.getElementById(id);
 if(e.style.display==='none'){e.style.display='block';}else{e.style.display='none';}
}
</script>
</head>
<body>
<h1>片道勇者2開発+6　ギルド依頼や新機能</h1>
<div>2023-06-24 10:31:18</div>
<div>ということで引き続き『片道勇者2』の開発を
みっちりやらせていただいております！

が、やっぱりローグライクのデータ作りってすごい時間かかる！！
たとえば思い出してください、『不思議のダンジョン』シリーズのアイテムって
【1個1個それぞれ専用のプログラム】で動いてる処理も多いわけで、
個性的なデータ1個を作ろうとするだけで思った以上のコストがかかってしまうのです。

『片道勇者2』では全カードの処理をスクリプト化したりすることで
なるべく少ない機能で応用の利く造りにしたつもりですが、
それでも作成コストは高めだということを思い出させられました。

なるべく効率を上げられるところを見つけつつ、
気持ちをくさらせずペース維持して作っていこうと思います！
<HR>

<span style="font-size:x-large;">【引き続き施設やNPC作成！】</span>
前も言いましたがここからずっと「施設やNPC作ったぞー！」という話題で
開発日誌が埋まると思います！

ということで今回ご紹介するのはこちら！


<span style="font-size:large;"><strong>◆旅人ギルド員</strong></span>
<img src="https://silversecond.net/data/p_diary5/20230624A.jpg" border="1" width="320">
旅人ギルド員はランダムで依頼をいくつか提示してくれるNPCで、
プレイヤーはそのうちの1つの依頼を受注することができます。
依頼をこなすと『レアなスキルが確実に手に入るクリスタル』をもらえたり、
『次元の金貨』をいっぱいもらえたりします。

今回搭載した依頼は以下の通り！


<span style="font-size: 110%"><B>【アイテムの配達任務】</B></span>
『ギルドの配達品』というアイテムを一定距離先まで運ぶ依頼です。
指定日数以内に運べればおまけで貴重なアイテムももらえます。
何を運んでいるかは教えてもらえませんが、途中で襲ってくる盗賊団はなぜか中味を知っています。

<img src="../image/2023/20230624.jpg" border="1" width="520">

そしてまた、『ギルドの配達品』の中にはなんらかの貴重品が入っており、
重犯罪者にされることを覚悟するなら途中で開けてしまうこともできます！
輸送依頼中に「輸送中の荷物」を奪ってしまいたいあなたも安心！
ギルドからの信頼を得た状態でこの任務を受注したなら、
なんと「聖なる武器」や「聖なる防具」が入っている場合もあります。



<span style="font-size: 110%"><B>【NPCの護衛任務】</B></span>
協力NPCとして1人のNPCがついてきます。
それを守りながら一定距離先まで行ければ報酬が手に入ります。
前作の『片道勇者1』でも要塞地形などで捕まっている人を脱出させて、
次の地形まで連れていけばお金がもらえる、という展開がありましたが、
ゲーム的に割と面白そうな任務の割にあまり発生しなくてもったいなかったので、
今回は発生率を上げてドキドキさせていきたいですね！

もちろん途中で魔王とも遭遇するので思ったより緊張感がありました。
たぶん一番キツいので護衛任務は他よりも距離を短くしたほうがよさそうです。



<span style="font-size: 110%"><B>【敵地での回収任務】</B></span>
指定地点に行き、敵を倒して遺体から何かを回収するというミッションです。
要するにほぼ戦闘任務ですが、「回収」さえできれば敵と戦う必要はないので、
付近の地形や、地形変化系のアイテムをうまく使えば戦闘を避ける工夫もできます。

ただし対象からブツを見つけられるかどうかはクリティカル率依存の
確率判定になっていて、クリティカル率が低い場合は数ターンかけて
チャレンジしなければならないことがあります。
（失敗するごとに+20％などの累積補正がかかります）

これによって、単純に敵の横を強引にすり抜けて回収対象に
タッチするだけでは達成がやや難しいので、あともう一工夫が要求されます。
といっても出てくる相手は、強い職業ならリソースを吐けば
普通に勝てる程度の敵になっています。

<HR>
といった感じの依頼を作成しました！

中にはちょっと急ぎめに行った方がお得だったり、
余計なところを回るほどリスクが上がる依頼もあり、
「ゲーム的に先を急ぐ場面もいくらか生まれるといいなー」
という意図で搭載されています。

だいたいのローグライクは
『（食料なども加味して）限界までゆっくり行くことが最適解になりがち』
なので、たまには急ぐ方が最適解になる場面も作って
いつもと違う味を楽しんでいただきたい！　と考えています。

しかしこういう意図だと、ときどきランダムイベントで
<B>「150km先の地点で物資の配給をやっておりますぞー！　XX日目になるといなくなるのでお早めに！」</B>
みたいな展開が発生しても面白いかもしれませんね。
うまくバランスが整えられれば、
『なるべく期限内に着くようにしつつ、可能な範囲の探索も行うことが最適解になる』
という、思考量が上がる悩ましい展開が楽しめそうです。
（全部無視して配給地点まで直進してもいいけれど、
それはそれで探索量がちょっと減るので最適解ではなくなります）

<HR>
<span style="font-size:x-large;">【細々とした機能の搭載】</span>

ネタをかさ増しするために今回搭載した機能の紹介も入れていきます！

<span style="font-size:large;"><strong>◆レア度別にカードを抽選して1つ選べる機能！</strong></span>
特定のランダムテーブルから一定以上のレア度の
カードだけ抽選して選ばせる機能を搭載しました！
「いやこれくらい入れて当然でしょう」って感じの処理でしたが
まだ作られていませんでした。

これでゴールドレア（ランク3）以上のアイテムだけ出すとか、
レジェンドレア（ランク4）以上のスキルだけ出すみたいな処理を
実現できるようになったので、上位スキル3つから1つを選んで覚えられる
『スキルクリスタル[ゴールドレア]』みたいなのも実装しました！
特別な仕事の報酬として手に入ると喜べそうです。


<span style="font-size:large;"><strong>◆近付くまで動かない敵！</strong></span>
前作の『片道勇者1』では「近付くまで動かない敵」というのは
実装されていなかったので、ダンジョン内であろうがいつであろうが
敵はみんなウロウロしてましたが、2では動かない敵が搭載されます！

これで何ができるかというと、「女の子を囲んでいる山賊集団」みたいなイベントが作れます！
前作だと、仮に上のイベントを作って各キャラを出現させても
山賊が勝手にどっかに行ってしまうので、さっき倒したか
奥に行ってるかもしれない山賊らに対して女の子が
一人でおびえてるシーンにしかなりませんでした。


<B>＜昼夜によって敵の活発さを変えてみる？＞</B>
あとこの「じっとしてる敵」機能を実装してみて思ったのが、
ダンジョン内の敵も近付くまでじっとしてる（寝てる）ように
したらどうかなと考え中です。

敵が集まりにくいと、ダンジョン外からの攻撃の効果が下がって
面白くないとかあるかもしれませんが、
「時間帯に応じて一部の敵は寝てる」などにすると、
たとえば「昼間のダンジョンだとゾンビやガイコツが寝てて
宝箱まで壁を空けて直進しやすくなる」みたいに
忍び込みやすさが上がって、それはそれで面白いかもしれません。

前作だと、昼でも夜でも視界の差くらいしかなくて
昼夜の差があまり差別化されてませんでしたしね！


<span style="font-size:large;"><strong>◆敵のリンク反応機能！</strong></span>
敵1体に気付かれると、「同じ出身」=「同じ施設内で出現した他の敵」が
一斉に反応するという処理を搭載しました。
上の「近付くまで動かない敵」の集団に対し、
端から1体ずつ気付かせて各個撃破されるという
不自然すぎる問題があったので実装されました。

誰かが気付くと、「「「敵だー！」」」みたいな感じで一斉に反応するので
ちょっと自然な感じになりました。

<HR>
といった感じで、これ以外にもいろいろ地道に実装中です！
NPCもシステムも、面白みを感じられそうな要素はどんどん入れていきたいですね！


<a href="https://sils.fc2.net/blog-entry-789.html" class="red">【おまけも見る】</a></div>
<a href="javascript:void(0);" onclick="toggle("ext-20230624103118")">追記を開く</a><div id="ext-20230624103118" style="display:none;"><hr size="1" />
<strong><span style="font-size:large;">【おまけ　ゲーム開発話『急ぐ方がお得になる場面も入れたい！】</span></strong>

ローグライクもそうですが、普通にゲームを作ると
「とにかくゆっくり行く方が最善になる」という場面が多くなりがちです。

たとえば多くのダンジョンローグライクRPGは、食料が許す範囲で、
今いるフロアでいっぱい経験値やアイテムなどを稼ぐ方が有利になりやすくなります。
といいますか無限稼ぎができないように
食料の制約が設けられているといった方が正しいでしょう。

また、他にこの「ゆっくり行くのが最善」問題が目立ちやすいのが「戦術シミュレーションゲーム」！
ここでは一例として、グリッド（マス目）上で戦うSRPGを考えてみましょう。

SRPGでは、何の制限もない状況なら戦術的には
「じりじり進んで敵を1体ずつ釣ってみんなで倒し、また1体ずつ釣る戦い方」
がおそらく最も安全な戦法で、『最適解』と言えます。

とはいえ、そればかり通用する場面ばかりだと、
プレイヤーのやることが単純で飽きが早くなってしまいます。
ときどきは1体釣りでなく数体同時釣りをするスピードが求められる、
つまりたまには『急いだ方が最適な場面がでてくる』方が、
ゲームの遊びの幅が広がり、緊張感も出てゲームがキュッと引き締まることでしょう。


なので、よくできたゲームはメリハリを付けるために、
「いかに自然に急がせるか」という意図で様々な工夫が取り入れられています。
たとえば最近も新作が出た『ファイアーエムブレム』シリーズでは、以下の工夫がされています。

<span style="color:#CC0000"><strong>●A.戦場マップ上に何かがもらえる「村」があり、ゆっくり進んでいると賊や魔物に村を破壊されてしまう。
　
●B.建物マップの奥まった場所にアイテムが入った「宝箱」があり、盗賊がそれを奪おうとしている。
　
●C.仲間ユニットが遠くにいて、早く救助に行かないとやられてしまう。
　
●D.まともに戦ったら対応不能なほどの量または質の「増援」が出てくる。</strong></span>

こんな風に『ファイアーエムブレム』には
『急いだほうがお得な（あるいは急がないと敗北する）場面』がたびたび用意されており、
「超安全にゆっくり戦うより、負けない範囲で速く進む方が最適解になる」
という変化を産む仕組みが導入されています。

前の2つのA、Bは『速く進ませる引力』として非常に優秀で、
最悪、宝などが全部取れなくてもクリア不可能にはならないだろうと
分かっていても可能な限り急ぎたくなります。
その状況では、「宝が取れて」、「こちらも致命的な被害を出さない」
程度に急ぐのが『最適解』になるわけですからね。

C、Dの「急がないと仲間がやられる/ゲームオーバーになる」ほど
強制力のある急がせステージはごく限られていますが、
「最高の急がせ度」になります。たまに来ると緊張感がすごくてドキドキします。


このように「急ぐことが有利になる」要素があると、
『ひたすら慎重に進む』プレイから、
『必要な慎重さを維持しつつ要求を満たせる速度で進む』ことが
最適解に変わり、【判断重視プレイヤー】向けのゲームとして
より高度なプレイングが求められてアツくなります！

また、注視すべき点として、A、Bのような「急いで手に入る追加報酬」には
「攻略に致命的な影響が出るほど強力すぎるもの」は
基本的には入っていません。
『なくてもクリアできるけど手に入ると十分喜べる程度のもの』
が望ましいはず！　こういったバランスもよく考えるべき点です。

ちなみに「急いで手に入る追加報酬」の類例として
「一定以上早く行くとルートが変わる」という
戦術シミュレーションゲームも結構あります。

プレイヤーのうまさに応じてさらに過酷な上位ルートに導いたり、
そうでなければ簡単ルートに誘導したりもできるので、
これも一つの面白い造りだと思います。


<strong>＜片道勇者はどうなっているか＞</strong>

『片道勇者』の場合は、すでに強制スクロール自体が
前述Dのような『急がないとゲームオーバー』という急がせ要素になっています。
ですが、それだけだとペースがほぼ一定で、やっぱり慣れてしまいます。

そこに前述のギルドの依頼などを使って、前述ABのような
「さらに適度に急ぐことで資産がより増えるよ！」
という引力も作って急がせ具合を変えることは、
ゲーム中の最適行動を揺らがせるためのいい手段だと考えています。

ゲームとして「最適な行動が状況によって変わる」と、
「判断重視プレイヤー」的に面白くなります。
職業はどうか、仲間がいるか、地形的に戦いやすいか、
手持ちのリソースはどうか、急いだ方が有利な場面か……
様々な状況を加味して適切なアクションが変わるのが、
考え甲斐があるすばらしいゲームです！　判断重視プレイヤー的には！

とはいえ、全部の場面で最適行動を取り続けないと
クリアできないほどのゲームはガチすぎて私もつらいので、
救済要素として「リソースをためてゴリ押しできる」要素があるのは
自分的にもありがたいと思っています！
それは『片道勇者2』でも残していきたい部分ですね。
<hr size="1" />

<B>＜余裕のある時間制限は『緊張感を増す』ためだけにも使える＞</B>

こちらは「急がせ要素」だけど、最適解自体は
そんなに変わらないゆるいバランスでのお話です！

項目名の通り、『甘めの時間制限』のようなゆるい急がせ要素を
「真剣に遊んでもらうため」だけ使うこともできます。

たとえば15日間というゲーム内時間制限がある
私のRPG『シルフェイド幻想譚』もそうなのですが、

<strong>「ゲーム開発者的には余り気味の時間制限」</strong>

を用意することで、プレイヤーに対して
「ちょっと急ぎ目に行かないとまずそう」という雰囲気を出すことができます。

でも実はこのゲーム、初見でも5～7日目くらいでクリアできる人が多いので、
2～3倍くらい時間に余裕があります。
「なるべくいつも最適解を考えて行動してもらいたい！」
と開発者のあなたが思っている場合は、こんなほぼフレーバー的な
時間制限を搭載するだけでもいいスパイスになるはずです。

　
他にも、TRPG(テーブルトークRPG)のシナリオを考えるときのコツとして、
余り気味でもいいので「時間制限」あるいは「時間がなさそうな雰囲気」を
出していくべきだ、というのは、色んなシナリオ作成アドバイスの中で挙げられています。
じゃないとホントにゆるゆるな雰囲気になってしまうことが多いんですよ！

「何日あるか分からないけど、あと数日で邪神復活の儀式が行われてしまう！」
でもいいので時間がまずそうなことを伝えるだけで、
遊び手の人が真剣にシナリオに集中してくれることが多いです。


こんな風に、『時間制限』もとい『急がせ要素』は、
その時間的難易度がゆるくても
『最適解を考え続けてもらいたいゲーム』に非常にマッチします。
もしご自分のゲームがそういった作品でしたら、
ガチめな時間制限じゃなくてもいいのでぜひ「急がせ要素」の導入をご検討ください。

ちなみに、こういった「急がせ要素」の問題を挙げるなら、
「そこまで急がなくていいんだよ～」って伝える部分も作らないと
心理的にまったく無駄行動ができなくなることです。

無駄行動という概念が元々あまりないローグライクやシミュレーションゲーム、
無駄行動をして欲しくないTRPGならいいのですが、
フィールド探索を行えるRPGだと「今日はここまで進めばOK！」
「この辺探索しても間に合うよ！」みたいな指標がないと
探索する心の余裕がなくて辛くなるので、
必要そうならそういった配慮もぜひセットで考えてみてください。

<hr size="1" />
時間制限は
「（ゆっくり行くのが最善のゲームに対して）一時的に最適解を変える」
ためにも、「緊張感を生む」ためにも使えます。

時間制限がキツすぎたり、使い方次第ではストレスになることもあるので
扱いには注意が必要ですが、適切に使えばすばらしいスパイスになります。
「時間制限」や「急がせ要素」は、いつも頭のすみに置いていきたいと考えています。</div>
</body>
</html>