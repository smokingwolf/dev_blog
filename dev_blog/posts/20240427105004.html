<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>続ウディタ修正＆ツクール配信＆片道勇者2再開</title>
<script>
function toggle(id){
 var e=document.getElementById(id);
 if(e.style.display==='none'){e.style.display='block';}else{e.style.display='none';}
}
</script>
</head>
<body>
<h1>続ウディタ修正＆ツクール配信＆片道勇者2再開</h1>
<div>2024-04-27 10:50:04</div>
<div>ということで今回も引き続きウディタの修正でドタバタしてたり、
生活が大変だったり、気晴らしに
新作RPGツクール（RPG MAKER WITH）の生放送をしたり、
そのすき間に『片道勇者2』の開発をちょっと進めたりする感じの
色々あった二週間でした！

今回起きたイベントを以下に列挙していきます！

<img src="../image/2024/20240427.jpg" border="1" style="max-width:520px;" loading="lazy">



<HR><span style="font-size:large;"><B>◆ウディタ　コードの組み方次第で古いPCで動かなくなる問題</B></span><HR>
ウディタの最新版の問題が一通り解決したかなあと思ったら
また新たな難題が発生してしまいました！

というのも、
<B><span style="color: #d50000">『プログラムのコードの組み方によっては新しめのCPU専用の命令が
使われるようになってしまい、古いPCでは動かなくなる』</span></B>
という問題が起きてしまったのです！

私も長年プログラムしててこういう問題があるのを全然知らず、
ちょっとした衝撃を受けてしまいました。
前回「うひょーがんばっていじってたら速度28倍になったー！」という部分
がまさに新しめのCPU命令で処理するよう最適化されてしまった場所の一つっぽくて、
2011年以前などのCPUが古いPCの場合は、その処理を回避するようにしないと
エラーが起きることが判明！

ということで、それを発見するために何日も使って何かできないかと奮闘しておりました。

<blockquote class="twitter-tweet" data-media-max-width="510"><p lang="ja" dir="ltr">【ウディタ】<br>『最新の暗号化を使ったときだけ2011年以前のPCで起動しない』という謎めいたご報告をいただいて調査してましたが、検証の結果、<br><br>『コードの組み方によっては(勝手に特殊な最適化が働いて)昔のCPUでだけ動かなくなることがある』<br><br>ということを今日知りました。<br>プログラミングヤバい。 <a href="https://t.co/c3K0JAxJtl" class="red">pic.twitter.com/c3K0JAxJtl</a></p>&mdash; SmokingWOLF@片道勇者2開発中/ゲーム開発者 (@WO_LF) <a href="https://twitter.com/WO_LF/status/1780969110576476178?ref_src=twsrc%5Etfw" class="red">April 18, 2024</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<span style="font-size: 80%">　<B>↑ CPUの拡張命令の「AVX」の有無で動作が変化していました。
ってよく見たら「メモリ違反のアクセス違反」って言ってるところが！
「メモリのアクセス違反」の誤記です。</B></span>


結果として、今回は仮想環境でCPUの機能をオンオフしながら検証するなんて
初めての経験ができてとても勉強になりました。
これでいくらか古い環境のテストもできそうです。

ただ、「仮想環境上」ではこのCPU差の問題への対策ができたのですが、
情報をいただいたご報告者さまのPCでは問題が解決しませんでした、残念です。
詳細は掴みきれませんでしたが、他の方でも
同じ時代のCPUで問題が起きるかもしれません。


とはいえ、ひとまず問題が起きる環境はだいぶ昔のPCだけらしいので、
今回は「最新の暗号化を使うと2011年ごろ以前のPCで起動できなくなる可能性があるから気をつけてくれよな！」という警告を
次バージョンからEditor内に入れることで対応しようと考えています。
さらに時間が経てば2011年ごろのPCも徐々になくなっていって、
問題発生頻度はゼロに近付いていくでしょう。


<B>【古いPCでも動かしたい場合は？】</B>

もしゲーム開発者さま側で古いPCでも
動作可能にしたい場合は「Ver3.14～暗号化」という、
1つ前の暗号化を使用することで今回の問題を起きなくすることができます。
（問題が起きる最新版暗号化は「Ver3.31~暗号化」以降のみ）

ウディタはいちおうWindows7（2009年発売）以降で動作するようになっているので、
微妙に今回の「2011年以前のCPUで起動できない」という
条件に引っかかる可能性があります。
どこまで昔のPCをサポートすればいいのかは悩みどころですが、
基本的には「10年以内の環境はなるべく全部動くようがんばる」
「それ以上は時と場合によりけり」という感じでやっていこうと思っています。



<HR><span style="font-size:large;"><B>RPG MAKER WITH体験版のプレイ配信をしました！</B></span><HR>
『【ツクール】ウディタ作者がRPG MAKER WITH PLAYER + 体験版を遊ぶよ』
というちょっぴり挑発的なタイトルで生放送させていただきました！

でも中味は全然挑発的じゃなくて
「うひょーこの機能が欲しかったんですよ！　夢が広がるー！」
とか言ってばっかりでした。家庭用ゲームのRPGツクールの記憶が
『RPGツクール3』で止まってた私にはまぶしすぎるツクールでしたね！

<iframe width="520" height="300" src="https://www.youtube.com/embed/RKPe20kOicc?si=UKJVuH192xqoVxyH" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

出た話題としては、

「ウディタの修正が忙しくて体験版遊べてなかったんですよ！」「家庭用版のいいところはこれですよね、オンラインにアップした他人のデータをDLしやすい！」「一流って感じの曲ですね」「レイヤー4もある…負けた…！(ウディタは3レイヤー)」「デバッグログがある！？」「ルート設定ができる！ プレビューもある！ すごい！」「ピクチャ番号100まで使える！ RPGツクール2000マンにはうれしいですね(50枚までだったので)」「文章の表示で制御文字のリファレンス見られるのいいなー色番号の表示もいいですよねこれ」「\FS[50]こんぬちわ！！」「うおお選択肢が6択も使える！」「アイテム選択の処理！？ 通常アイテム1つ選ばせるとかできる！？」「ウフ～ン★」「おっ、乱数が作れる！ これだよこれ！」「おおおキャラクターのマップXYと画面XY取れるー！」「(条件分岐で)キー入力が取れる！　音ゲー作れますよ！」「キャラの名前(の頭文字)がRPGMAKERみたいですね、いいですね(ウディタでも似た感じにしてるので共感)」「いやーほんとこれは家庭用RPGツクールで何でも作れそうな感じありますね」「正方形のピクチャ1枚あればなんでもできる！」「指定位置のイベントID取れるのえらい！」「利用規約に賠償請求可能な金額は1000円かソフト購入代金の高い方って記載がある！」「せんめつ！（※たぶん正しくは「じょうめつ」）」

みたいなことを言っておりました。気になる方は動画本編をどうぞ！



<HR><span style="font-size:large;"><B>『片道勇者2』開発再開！</B></span><HR>
ずっとウディタの修正にかかりっきりでこちらが進められていませんでした！
『片道勇者2』、今はデータ面もまだまだなのですが、
ひとまず優先順の都合で現在はメインストーリーのところをざっくり作っています！
いつでも「完成」宣言ができる状態にしておくことは精神衛生上大事ですからね！

ですがいつものことながらストーリーのネタバレに配慮すると
ストーリー開発中は何も言えなくなって開発日誌のネタがなくなります！　困った！

ちょっとしたアイテムやスキル紹介などでも期待度を高める役目を
果たしてくれると思うので、今後そのあたりも紹介できる部分がないか
常に考えながら作っていきたいと思います！
「途中の情報を面白くできずして最終成果をワクワクさせられようか！」
とも思いますしね！
その辺の断片情報からワクワクを生むセンスを磨くのにいい訓練にもなるかもしれません。
もちろん本編作成がおろそかにならない程度にですが！

<HR>
という感じであっちこっち行ったり少し楽しみも確保しつつマイペースに進めております！

ここからしばらくは、ウディタのバグ修正しつつ
<a target="_blank" href="https://silversecond.com/WolfRPGEditor/Contest/"><B><span style="font-size: 150%">第16回ウディコン</span></B></a>が始まるまでは
『片道勇者2』開発に集中していきたいです！
ウディコンの準備もがんばります！　今年もお楽しみに！</div>

</body>
</html>