<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>2024-04</title>
<style>
body{display:flex;}
#content{flex:1;}
#sidebar{width:80px;margin-left:10px;}
.nav{margin:10px 0;}
.entry{border:1px solid #ccc;border-radius:8px;margin:10px 0;overflow:hidden;}
.entry-title{background:linear-gradient(to right,#9bb0c5,#6f7f92);color:#fff;padding:4px;}
.entry-body{background:#fff;color:#444;padding:4px;}
</style>
<script>
function toggle(id){
  var e=document.getElementById(id);
  if(e.style.display==='none'){e.style.display='block';}else{e.style.display='none';}
}
function toggleDisp(id){
  var e=document.getElementById(id);
  if(e.style.display==='none'){e.style.display='block';}else{e.style.display='none';}
}
</script>
</head>
<body>
<div id='content'>
<div class='nav'><a href='03.html'>前の月へ</a> | <a href='05.html'>次の月へ</a></div>
<div class='entry'><div class='entry-title'>2024-04-27  続ウディタ修正＆ツクール配信＆片道勇者2再開</div><div class='entry-body'>ということで今回も引き続きウディタの修正でドタバタしてたり、<br>生活が大変だったり、気晴らしに<br>新作RPGツクール（RPG MAKER WITH）の生放送をしたり、<br>そのすき間に『片道勇者2』の開発をちょっと進めたりする感じの<br>色々あった二週間でした！<br><br>今回起きたイベントを以下に列挙していきます！<br><br><img src="../image/2024/20240427.jpg" border="1" style="max-width:520px;" loading="lazy"><br><br><br><br><HR><span style="font-size:large;"><B>◆ウディタ　コードの組み方次第で古いPCで動かなくなる問題</B></span><HR><br>ウディタの最新版の問題が一通り解決したかなあと思ったら<br>また新たな難題が発生してしまいました！<br><br>というのも、<br><B><span style="color: #d50000">『プログラムのコードの組み方によっては新しめのCPU専用の命令が<br>使われるようになってしまい、古いPCでは動かなくなる』</span></B><br>という問題が起きてしまったのです！<br><br>私も長年プログラムしててこういう問題があるのを全然知らず、<br>ちょっとした衝撃を受けてしまいました。<br>前回「うひょーがんばっていじってたら速度28倍になったー！」という部分<br>がまさに新しめのCPU命令で処理するよう最適化されてしまった場所の一つっぽくて、<br>2011年以前などのCPUが古いPCの場合は、その処理を回避するようにしないと<br>エラーが起きることが判明！<br><br>ということで、それを発見するために何日も使って何かできないかと奮闘しておりました。<br><br><blockquote class="twitter-tweet" data-media-max-width="510"><p lang="ja" dir="ltr">【ウディタ】<br>『最新の暗号化を使ったときだけ2011年以前のPCで起動しない』という謎めいたご報告をいただいて調査してましたが、検証の結果、<br><br>『コードの組み方によっては(勝手に特殊な最適化が働いて)昔のCPUでだけ動かなくなることがある』<br><br>ということを今日知りました。<br>プログラミングヤバい。 <a href="https://t.co/c3K0JAxJtl" class="red">pic.twitter.com/c3K0JAxJtl</a></p>&mdash; SmokingWOLF@片道勇者2開発中/ゲーム開発者 (@WO_LF) <a href="https://twitter.com/WO_LF/status/1780969110576476178?ref_src=twsrc%5Etfw" class="red">April 18, 2024</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><br><span style="font-size: 80%">　<B>↑ CPUの拡張命令の「AVX」の有無で動作が変化していました。<br>ってよく見たら「メモリ違反のアクセス違反」って言ってるところが！<br>「メモリのアクセス違反」の誤記です。</B></span><br><br><br>結果として、今回は仮想環境でCPUの機能をオンオフしながら検証するなんて<br>初めての経験ができてとても勉強になりました。<br>これでいくらか古い環境のテストもできそうです。<br><br>ただ、「仮想環境上」ではこのCPU差の問題への対策ができたのですが、<br>情報をいただいたご報告者さまのPCでは問題が解決しませんでした、残念です。<br>詳細は掴みきれませんでしたが、他の方でも<br>同じ時代のCPUで問題が起きるかもしれません。<br><br><br>とはいえ、ひとまず問題が起きる環境はだいぶ昔のPCだけらしいので、<br>今回は「最新の暗号化を使うと2011年ごろ以前のPCで起動できなくなる可能性があるから気をつけてくれよな！」という警告を<br>次バージョンからEditor内に入れることで対応しようと考えています。<br>さらに時間が経てば2011年ごろのPCも徐々になくなっていって、<br>問題発生頻度はゼロに近付いていくでしょう。<br><br><br><B>【古いPCでも動かしたい場合は？】</B><br><br>もしゲーム開発者さま側で古いPCでも<br>動作可能にしたい場合は「Ver3.14～暗号化」という、<br>1つ前の暗号化を使用することで今回の問題を起きなくすることができます。<br>（問題が起きる最新版暗号化は「Ver3.31~暗号化」以降のみ）<br><br>ウディタはいちおうWindows7（2009年発売）以降で動作するようになっているので、<br>微妙に今回の「2011年以前のCPUで起動できない」という<br>条件に引っかかる可能性があります。<br>どこまで昔のPCをサポートすればいいのかは悩みどころですが、<br>基本的には「10年以内の環境はなるべく全部動くようがんばる」<br>「それ以上は時と場合によりけり」という感じでやっていこうと思っています。<br><br><br><br><HR><span style="font-size:large;"><B>RPG MAKER WITH体験版のプレイ配信をしました！</B></span><HR><br>『【ツクール】ウディタ作者がRPG MAKER WITH PLAYER + 体験版を遊ぶよ』<br>というちょっぴり挑発的なタイトルで生放送させていただきました！<br><br>でも中味は全然挑発的じゃなくて<br>「うひょーこの機能が欲しかったんですよ！　夢が広がるー！」<br>とか言ってばっかりでした。家庭用ゲームのRPGツクールの記憶が<br>『RPGツクール3』で止まってた私にはまぶしすぎるツクールでしたね！<br><br><iframe width="520" height="300" src="https://www.youtube.com/embed/RKPe20kOicc?si=UKJVuH192xqoVxyH" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe><br><br>出た話題としては、<br><br>「ウディタの修正が忙しくて体験版遊べてなかったんですよ！」「家庭用版のいいところはこれですよね、オンラインにアップした他人のデータをDLしやすい！」「一流って感じの曲ですね」「レイヤー4もある…負けた…！(ウディタは3レイヤー)」「デバッグログがある！？」「ルート設定ができる！ プレビューもある！ すごい！」「ピクチャ番号100まで使える！ RPGツクール2000マンにはうれしいですね(50枚までだったので)」「文章の表示で制御文字のリファレンス見られるのいいなー色番号の表示もいいですよねこれ」「\FS[50]こんぬちわ！！」「うおお選択肢が6択も使える！」「アイテム選択の処理！？ 通常アイテム1つ選ばせるとかできる！？」「ウフ～ン★」「おっ、乱数が作れる！ これだよこれ！」「おおおキャラクターのマップXYと画面XY取れるー！」「(条件分岐で)キー入力が取れる！　音ゲー作れますよ！」「キャラの名前(の頭文字)がRPGMAKERみたいですね、いいですね(ウディタでも似た感じにしてるので共感)」「いやーほんとこれは家庭用RPGツクールで何でも作れそうな感じありますね」「正方形のピクチャ1枚あればなんでもできる！」「指定位置のイベントID取れるのえらい！」「利用規約に賠償請求可能な金額は1000円かソフト購入代金の高い方って記載がある！」「せんめつ！（※たぶん正しくは「じょうめつ」）」<br><br>みたいなことを言っておりました。気になる方は動画本編をどうぞ！<br><br><br><br><HR><span style="font-size:large;"><B>『片道勇者2』開発再開！</B></span><HR><br>ずっとウディタの修正にかかりっきりでこちらが進められていませんでした！<br>『片道勇者2』、今はデータ面もまだまだなのですが、<br>ひとまず優先順の都合で現在はメインストーリーのところをざっくり作っています！<br>いつでも「完成」宣言ができる状態にしておくことは精神衛生上大事ですからね！<br><br>ですがいつものことながらストーリーのネタバレに配慮すると<br>ストーリー開発中は何も言えなくなって開発日誌のネタがなくなります！　困った！<br><br>ちょっとしたアイテムやスキル紹介などでも期待度を高める役目を<br>果たしてくれると思うので、今後そのあたりも紹介できる部分がないか<br>常に考えながら作っていきたいと思います！<br>「途中の情報を面白くできずして最終成果をワクワクさせられようか！」<br>とも思いますしね！<br>その辺の断片情報からワクワクを生むセンスを磨くのにいい訓練にもなるかもしれません。<br>もちろん本編作成がおろそかにならない程度にですが！<br><br><HR><br>という感じであっちこっち行ったり少し楽しみも確保しつつマイペースに進めております！<br><br>ここからしばらくは、ウディタのバグ修正しつつ<br><a target="_blank" href="https://silversecond.com/WolfRPGEditor/Contest/"><B><span style="font-size: 150%">第16回ウディコン</span></B></a>が始まるまでは<br>『片道勇者2』開発に集中していきたいです！<br>ウディコンの準備もがんばります！　今年もお楽しみに！</div></div><br><br><br>
<div class='entry'><div class='entry-title'>2024-04-13  【ウディタ】セキュリティ向上作業、いったん完了!!</div><div class='entry-body'>この2週間も引き続きウディタの<br>セキュリティアップデートのために費やしておりました！<br>1ヶ月近くもの時間をかけてしまったのでウディタ作業費は<br>超大赤字ですが、セキュリティやデータ処理について<br>たくさんのお勉強ができたので人生ではプラスの期間でした。<br><br>ひとまず最新版ウディタは一通り動作するようになったっぽいので、<br>ウディタ公式にてVer3.311をアップしております！<br>とはいえまだちょいちょいバグが残ってる匂いがするので、<br>慎重な方はもう少し待ってからお試しください。<br><br><a target="_blank" href="https://silversecond.com/WolfRPGEditor/"><span style="font-size: 200%">【WOLF RPGエディター公式ページへ】</span></a><br><br><img src="../image/2024/20240413.jpg" border="1" style="max-width:520px;" loading="lazy"><br><br><br><br><HR><span style="font-size:large;"><B>◆ウディタのセキュリティ向上、プレイヤーへの影響はある？</B></span><HR><br>ウディタに対していろいろセキュリティ上の<br>基本的な対策を行ってみたのですが、その中でも<br>プレイヤーの方にダイレクトに影響が出る可能性があるのは<br>『DLLインジェクション』への対策です。<br><br>　『DLLインジェクション』とは簡単にいうと<br>「本来そのプログラムが使わないDLLを注入して、<br>強引にプログラムの処理を上書きする」手段で、<br>応用すれば内部データを抜き取ったりするような悪いことにも使えます。<br><br>そしてこれを対策したことによるプレイヤーの方への影響としては、<br><B><span style="color: #d50000">『別アプリの内部データを使用したり処理を上書きするような個人制作ソフト』</span></B><br>を使っている場合、Game.exeの起動時に以下のようなエラーが起きて<br>起動できなくなる可能性が出てくるという点です。<br><br><img src="https://silversecond.net/data/p_diary5/20240413A.jpg" border="1" style="max-width:520px;" loading="lazy"><br><span style="font-size: 80%"><B>　↑正規の署名がないDLLが読み込まれたと出てゲームが停止！　<br>企業製ソフトならたいてい正規の署名があるので大丈夫ですが、<br>個人制作ソフトだと正規署名が付いてないことが多いです。お高いんですよね！</B></span><br><br><br><B>※もし↑が出て遊べなかった場合、<span style="color:#CC0000">Gameを「管理者権限で起動」することで<br>このエラーを回避できるようですので、よければお試しください。<br>Game.exeの上で右クリック→「<strong>管理者として実行</strong>」を選べばOKです。</span><br>このエラー文そのものにも追記しておきます！<br>(2024-07-19追記)</B><br><br><br>なおこの「DLLインジェクション」技法は悪いことに<br>使われるだけじゃなくて、<br>「アクティブになってるウィンドウの上にかわいいマスコットキャラを表示する」<br>みたいなソフトでも昔使われていたと思います。<br><br>たとえば<br>「実行中のソフトのウィンドウ座標処理をDLLで乗っ取り、そこから<br>座標情報を抜き取って表示する（+ 元の処理はそのまま再現する）」<br>ことでウィンドウの上にキャラを乗せる処理を実現していたわけですね！<br><br>最近はそんな処理をすると厳しめのウィルスソフトに<br>バチバチに怒られたりする予感がしますので、<br>2010年すぎからこういったソフトも段々なくなってしまった印象があります。<br><br>「ウィンドウを追随してくれるようなデスクトップマスコット系アプリが<br>なんで全然増えなくなったの！？」と私が思い始めた時期がその辺りでした。<br><br><span style="color: #42a5f5"><span style="font-size: 80%">（たとえば私が使っていた『ClockLauncher』というフリーソフトの2009年版では<br>アクティブウィンドウのそばにランチャーが自動的に移動する機能があり、<br>普通にそこでDLLインジェクションが使われていたためかソフト起動中は<br>最新Game.exeを実行できなくなりました(上の画像)。<br>それゆえか、『ClockLauncher』の特定のバージョンからは<br>その機能がなくなっています。<br>このソフトは2となった今でも更新されててすごい！）</span></span><br><br><br>ちなみに、セキュリティソフト自体もGame.exeに<br>『DLLインジェクション』することがありますが、<br>それには正規の署名が入っているのでウディタ上でもエラーは起きないはずです。<br>セキュリティソフトのDLLインジェクションは<br>『勝手に元の処理を上書きして、怪しい処理が実行されてないかを<br>監視する処理を加えている』わけですね！　たぶん！<br><br>おかげで今なら私も、どういった造りでそういったことを<br>実現してるのか、ちょっとだけ分かるようになってきました。<br><br><br><br><br><HR><span style="font-size:large;"><B>◆セキュリティの難しさとか雑談とか</B></span><HR><br>ここからはこの3週間にあったとりとめのないお話です。<br><br><B>●安全性のチェックを頻繁に入れるほど重くなるので<br>パフォーマンスのバランス取りにすごい時間がかかった！</B><br><span style="color: #42a5f5"><span style="font-size: 80%">　→　まず色んな処理の実行時間を検証するのにけっこう時間がかかりました。<br>「軽い処理で先にチェックして変化を察知したら重い処理を行う」といった組み方を、<br>かなり細かく作る必要がありました。</span></span><br><br><br><B>●新しい暗号化処理を作ったらうまく復号化できなくて地獄を見た！！</B><br><span style="color: #42a5f5"><span style="font-size: 80%">　→　当たり前ですが暗号化と復号化って1バイトだけ処理をシクっただけでデータがグチャグチャになるんですよ！<br>ヤケクソでSuno AIさんにこんな歌（　↓　）を<br>作ってもらったりしてました。作業用BGMとして。</span></span><br><blockquote class="twitter-tweet"><p lang="ja" dir="ltr">暗号化処理のプログラミングにシクったときの歌<br>（現在進行形） <a href="https://twitter.com/hashtag/SunoAI?src="hash&amp;ref_src=twsrc%5Etfw"">#SunoAI</a> <a href="https://t.co/lmQrOURuH0" class="red">pic.twitter.com/lmQrOURuH0</a></p>&mdash; SmokingWOLF@片道勇者2開発中/ゲーム開発者 (@WO_LF) <a href="https://twitter.com/WO_LF/status/1774406905655611489?ref_src=twsrc%5Etfw" class="red">March 31, 2024</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script><br><br><br><B>●試行錯誤してたら部分的な処理速度が最初の28倍になって笑ってしまった。</B><br><span style="font-size: 80%"><span style="color: #42a5f5">　→　ファイルを開く速度に影響するので、どうにか暗号化と復号化の速度を上げようといじってたら<br>最終的に処理速度が最初の書き方の28倍くらいになって笑ってしまいました。<br>最初の書き方は誰でも書きうるコードだったのに、そこから<br>CPUが処理しやすいように崩していったら最終的にこれ！<br>プログラミングの深さがヤバすぎますよ！<br><br>ウディタVer3のときも、超がんばってVisual Studio2003から<br>Visual Studio2022に環境を変えただけで部分的に速度10倍になったりして<br>驚きましたが、そういった最適化を受けやすい造りでコーディングする効果の<br>凄さに衝撃を受けました。これからはCPUに優しい組み方も考えなきゃ……。</span></span><br><br><br><B>●親がとうとう要介護4認定がでそうな状態になっててさらにしんどい！！</B><br><span style="color: #42a5f5"><span style="font-size: 80%">　→　前は要介護3認定だったんですが<br>ケアマネさんに見てもらったら要介護4かもって言われました。要するに大変です。<br>でも空き時間がないわけじゃないので開催まで残り100日を切った<br>ウディコンはなんとかがんばります！<br><br>介護において「半端に動ける状態の方が恐い」という意味が<br>理解できる段階になってきています。</span></span><br><br><br><br><HR><span style="font-size:large;"><B>おまけ　ウディタ内でできるセキュリティ対策記事紹介</B></span><HR><br>K-Shin07さまが、ウディタのゲーム開発者側でできる<br>セキュリティ対策の記事を書かれていたのでご紹介です！<br><br>【ウディタでのゲーム開発者が行えるセキュリティ対策】<br><a target="_blank" href="https://ci-en.net/creator/16060/article/1111345">https://ci-en.net/creator/16060/article/1111345</a><br><br>「チェックサムによる改ざん検知」「不正なゲーム実行を阻止」など、<br>ゲーム内からでもできる実用的なテクニックが挙げられています！<br><br>特に「チェックサム」は、オンライン要素があるゲームだと<br>通信内容が改ざんされてありえないスコアが送信されたりしちゃうことも<br>たまにあるので、そういった場合の防衛策としても有用です。<br><br><HR><br><br>ということで、今回のセキュリティアップデートはゲームデータの<br>いくらかの防衛力アップには繋がると思いますので、<br>気になってた方はよければぜひご利用ください。<br><br>とはいっても完全な防御ができないのがこのセキュリティ業界。<br>限界はありますのでその点はご了承ください。<br>超有名AAA作品のゲームデータだってたぶん素晴らしい暗号技術が<br>使われてるでしょうに、だいたい解凍されちゃってますしね。<br><br>ウディタ本体もまだもう少し様子見しないといけなさそうなのと、<br>『ウディタ翻訳サポートツール』の方にも今回の修正を<br>取り入れる必要があるので、もうしばらくプログラミングをがんばります。<br><br>一通り片付いたら、1ヶ月ぶりに自分のゲーム開発が再開できます。<br>がんばっていきます！</div></div>
<div class='nav'><a href='03.html'>前の月へ</a> | <a href='05.html'>次の月へ</a></div>
</div>
<div id='sidebar'>
<div><a href='../../archive/index.html'>開発日誌トップ</a></div>
<div><a href='javascript:void(0);' onclick="toggleDisp('y2025')">2025</a></div>
<div id='y2025' style='display:none;margin-left:10px;'>
<div><a href='../../archive/2025/05.html'>05</a></div>
<div><a href='../../archive/2025/04.html'>04</a></div>
<div><a href='../../archive/2025/03.html'>03</a></div>
<div><a href='../../archive/2025/02.html'>02</a></div>
<div><a href='../../archive/2025/01.html'>01</a></div>
</div>
<div><a href='javascript:void(0);' onclick="toggleDisp('y2024')">2024</a></div>
<div id='y2024' style='display:none;margin-left:10px;'>
<div><a href='../../archive/2024/12.html'>12</a></div>
<div><a href='../../archive/2024/11.html'>11</a></div>
<div><a href='../../archive/2024/10.html'>10</a></div>
<div><a href='../../archive/2024/09.html'>09</a></div>
<div><a href='../../archive/2024/08.html'>08</a></div>
<div><a href='../../archive/2024/07.html'>07</a></div>
<div><a href='../../archive/2024/06.html'>06</a></div>
<div><a href='../../archive/2024/05.html'>05</a></div>
<div><a href='../../archive/2024/04.html'>04</a></div>
<div><a href='../../archive/2024/03.html'>03</a></div>
<div><a href='../../archive/2024/02.html'>02</a></div>
<div><a href='../../archive/2024/01.html'>01</a></div>
</div>
<div><a href='javascript:void(0);' onclick="toggleDisp('y2023')">2023</a></div>
<div id='y2023' style='display:none;margin-left:10px;'>
<div><a href='../../archive/2023/12.html'>12</a></div>
<div><a href='../../archive/2023/11.html'>11</a></div>
<div><a href='../../archive/2023/10.html'>10</a></div>
<div><a href='../../archive/2023/09.html'>09</a></div>
<div><a href='../../archive/2023/08.html'>08</a></div>
<div><a href='../../archive/2023/07.html'>07</a></div>
<div><a href='../../archive/2023/06.html'>06</a></div>
<div><a href='../../archive/2023/05.html'>05</a></div>
<div><a href='../../archive/2023/04.html'>04</a></div>
<div><a href='../../archive/2023/03.html'>03</a></div>
<div><a href='../../archive/2023/02.html'>02</a></div>
<div><a href='../../archive/2023/01.html'>01</a></div>
</div>
<div><a href='javascript:void(0);' onclick="toggleDisp('y2022')">2022</a></div>
<div id='y2022' style='display:none;margin-left:10px;'>
<div><a href='../../archive/2022/12.html'>12</a></div>
<div><a href='../../archive/2022/11.html'>11</a></div>
<div><a href='../../archive/2022/10.html'>10</a></div>
<div><a href='../../archive/2022/09.html'>09</a></div>
<div><a href='../../archive/2022/08.html'>08</a></div>
<div><a href='../../archive/2022/07.html'>07</a></div>
<div><a href='../../archive/2022/06.html'>06</a></div>
<div><a href='../../archive/2022/05.html'>05</a></div>
<div><a href='../../archive/2022/04.html'>04</a></div>
<div><a href='../../archive/2022/03.html'>03</a></div>
<div><a href='../../archive/2022/02.html'>02</a></div>
<div><a href='../../archive/2022/01.html'>01</a></div>
</div>
<div><a href='javascript:void(0);' onclick="toggleDisp('y2021')">2021</a></div>
<div id='y2021' style='display:none;margin-left:10px;'>
<div><a href='../../archive/2021/12.html'>12</a></div>
<div><a href='../../archive/2021/11.html'>11</a></div>
<div><a href='../../archive/2021/10.html'>10</a></div>
<div><a href='../../archive/2021/09.html'>09</a></div>
<div><a href='../../archive/2021/08.html'>08</a></div>
<div><a href='../../archive/2021/07.html'>07</a></div>
<div><a href='../../archive/2021/06.html'>06</a></div>
<div><a href='../../archive/2021/05.html'>05</a></div>
<div><a href='../../archive/2021/04.html'>04</a></div>
<div><a href='../../archive/2021/03.html'>03</a></div>
<div><a href='../../archive/2021/02.html'>02</a></div>
<div><a href='../../archive/2021/01.html'>01</a></div>
</div>
<hr>
<div><a href='../../category/TRPG/001.html'>TRPG</a></div>
<div><a href='../../category/WOLF_RPGエディター/001.html'>WOLF RPGエディター</a></div>
<div><a href='../../category/その他/001.html'>その他</a></div>
<div><a href='../../category/片道勇者2_開発/001.html'>片道勇者2 開発</a></div>
<div><a href='../../category/落書き/001.html'>落書き</a></div>
<div><a href='../../category/開発日誌/001.html'>開発日誌</a></div>
</div>
</body>
</html>