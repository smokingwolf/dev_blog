<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>シルドラ開発記2 武装編</title>
<script>
function toggle(id){
 var e=document.getElementById(id);
 if(e.style.display==='none'){e.style.display='block';}else{e.style.display='none';}
}
</script>
</head>
<body>
<h1>シルドラ開発記2 武装編</h1>
<div>2010-11-21 11:13:55</div>
<div>シルフドラグーンゼロ開発記、第二回目は、武装とシールドについてです。

敵キャラの出現方法やらキャラクターや物語の話やら、考えることは
山ほどありますが、まずはゲームの基礎を面白くするところからです。

まずは、シルフドラグーンゼロの目玉要素である、武器選択から。

<hr size="1" />
<strong><span style="font-size:medium;">【武装を考える・アイデア編】</span></strong>

さて機体が決まったら、次は選べる武装を考えたくなります。
最初は多くの武装から選べるようにしようかなと考えていましたが、
「能力のチューン要素」を加えると、「連射力」や「攻撃力」の多少の差では、
武器の個性を表すことができなくなります。

なので、「攻撃方法そのものが大きく異なる武器」を、
いくらか用意できたらいいかなと思いました。
よって、この段階で以下の５種類を想定しました。

・初心者でも扱いやすいマシンガンタイプ　→　拡散砲
・初心者でも扱いやすい範囲攻撃武器タイプ　→　熱核砲
・玄人向けの狙い撃ちタイプ　→　狙撃砲
・好きな人向けの特殊な武器　→　レーザー
・STGといえば格闘武器がないと！　→　エネルギークロー

各武器の、当面のイメージは次の通りです。

<strong>＜拡散砲＞</strong>
とりあえずこれ一本あれば問題ない武器にしようと思いました。
武装を変えるのがよく分からない人、狙うのが苦手な人、
そういった人たちは、たぶんこの武器を使うだろうと考えたからです。

<strong>＜熱核砲＞</strong>
連射できない範囲攻撃で、ザコは一撃で倒せるくらいにします。
「重い」感覚があり、個人的にはあまり使われない気もしたので、
攻撃力を高めに、最終的な攻撃範囲も広めに取ります。
そしたら結局、割と人気武器になってしまいましたね。

<strong>＜狙撃砲＞</strong>
当てにくい武器なので、単体攻撃力は最大にしましょう。
しょっぱなから使うとその難しさに投げるかもしれないので、
お金を払ってアンロックするタイプにしておきます。
全弾当てればどの武器よりも早く要塞タイプを倒せる、くらいにします。

<strong>＜レーザー＞</strong>
ロマン武器にします。威力は弱めですが、かっこよくします。
でも「使いこなせば拡散砲より強くなる」くらいなら、
マニアな人や、ハードモードで活きるかもしれません。

<strong>＜エネルギークロー＞</strong>
やっぱりシューティングゲームといえば格闘武器ですよね！　
という立ち位置な私としては、入れざるを得ません。
威力は高いけど、使用時のリスクも高くします（シールドが一瞬大きく減る）。
レーザーのような攻撃力の低いメインウェポン一本だけだと、
苦労すると思うので、これはサブ枠に入れるのが正解そうです。


<hr size="1" />
<strong><span style="font-size:medium;">【武装を考える・具体編】</span></strong>

武装のだいたいの威力や、細かい内部処理を考えます。

どのみち、実際プレイしてみればパラメータは変わっていきますが、
おおざっぱなイメージと立ち位置くらいは明確にせねばなりません。

武器のパラメータを設定するにあたって最も注目するのは、
「単位時間あたりのダメージの大きさ」です。
要するに「<strong>１秒間で敵に与えられる平均ダメージ効率</strong>」でして、この大小を
先に決めて、攻撃力や連射力・使い勝手などの要素に切り分けていきます。


<strong>【1】敵１体に対して、全弾当てたときのダメージ効率は以下のようにします。</strong>
<span style="color:#CC0000">狙撃砲　＞　拡散砲　＞　熱核砲　＞　レーザー</span>

<strong>【2】対複数の敵に攻撃したときのダメージ効率は以下のようにします。</strong>
<span style="color:#CC0000">熱核砲（３体想定）＞　レーザー（２体想定）＞　狙撃砲　＞　拡散砲</span>

<strong>【3】ついでに「命中させやすさ・取り回しの良さ」は、以下のようにします。</strong>
<span style="color:#CC0000">レーザー　＞　拡散砲　＞　熱核砲　＞　狙撃砲</span>


こうして順序付ければ、だいたい各武器の価値が
等価になるのではないかな、と考えました。

さて、次は武器の処理方法を考える必要があります。


<strong>＜拡散砲＞</strong>
これについては、プロトタイプ段階で、すでに弾の連射処理を作ってあるので、
あとはチューン内容を反映するようにすればすぐ完成です。


<strong>＜熱核砲＞</strong>
「敵に当たるか弾の射程が来たら、爆発して範囲攻撃を行う処理」を
作る必要があります。ほかの武器より特殊なので、少し苦戦しましたが、
結局は「巨大な当たり判定の弾を一瞬出す」ことで爆発を表現しました。


<strong>＜狙撃砲＞</strong>
これもプロトタイプ段階の弾の処理でおおむね問題ありませんが、
「<strong>貫通する処理</strong>」を表現するために、ちょっとだけ工夫が加えられています。

旧シルフドラグーンのカノンもそうでしたが、弱い敵を貫通する演出は、
「<strong>攻撃力半分の弾を２つ重ねて発射</strong>」することで表現しています。
すると、敵にヒットすれば片方の弾と敵が消滅し、もう片方の弾は
そのまま進むので、一見、敵を貫いているような演出に見えるのです。
（もし敵のＨＰが高ければ、弾は２つともヒットして消える）
この手法は、お手軽で便利ですよ。


<strong>＜レーザー＞</strong>
当たり判定を作るのが、一番難しかった処理です。
敵への命中判定は、どんな処理で作られていると思いますか？
線と敵の交差を計算する？　いいえ、そんな高度なことはしていません。

レーザーの見た目は<strong>線</strong>ですが、内部的には
<strong>「一瞬で消える●型の弾」を、じゅず繋ぎにして並べている</strong>んです。
それを思いつくまでが、少し長かったです。お風呂でおもいつきました、エウレカ！

【レーザー当たり判定　参考画像】
<img src="../image/2010/20101121.gif" title="参考画像">

すなおに「線」と「敵」の交差を計算するのも手ですが、
弾の処理は、他で使ってるものをなるべく流用したほうが、
シンプルに作れて、かつ、バグも出にくくなりますからね。


<strong>＜エネルギークロー＞</strong>
これも割と作るのに苦労しましたが、
結局、処理的には「敵に当たっても消えない」弾が
自機の左右から前方に向かって出て、しばらく残る、というだけの攻撃です。
個人的に、一番かっこいい武器になるようにデザインしました。

<hr size="1" />
<strong>＜弾を表すための内部情報＞</strong>
なお、一つ一つの弾を表すために使用する情報は、主に以下の６つです。

<center><table><tr><td><small><strong><span style="color:#CC0000">◆現在の弾の位置
◆弾の移動速度
◆弾の攻撃力
◆弾が消えるまでの残り寿命
◆弾の攻撃範囲の大きさ</span>　</strong>
→　熱核砲の爆発は、すごい大きさの弾が一瞬出てるだけです！

<strong><span style="color:#CC0000">◆この弾は当たっても消えない？</span></strong>
→　熱核砲の爆発やレーザー、エネルギークローなど、
　 「一つの弾で、複数の敵に当たる」場合や、
　　クローのように敵に当たっても消えない場合はオンです。
</small></td></tr></table></center>

他にも、敵専用パラメータとして「シールド値をどれだけ削るか」
「ホーミング機能のオンオフ」などもありますが、
基本的には、上記の情報だけで、敵味方すべての弾が
処理されていると思います。

こうやって表される弾だけで、どうやってレーザーの当たり判定を
表現できるんだよ！と思っていたがゆえに、
レーザーを作るところで苦戦していたんですね。

<hr size="1" />
<span style="font-size:medium;"><strong>【シールドの実装】</strong></span>

※シールドエンハンサーという武装がありますが、ここで言っているのは
それではなく、基本装備として付いているシールドのことです。

このゲームでは、<strong>「シールド値が高いときは、攻撃受けてもライフに
ほとんど影響がなくて、シールド値が減るとダメージを受け始める」</strong>
という方式にすることにします。

シールドが自動で回復するようにすれば、ミスの「<strong>回数</strong>」でなく、
ミスの「<strong>度合い</strong>」に応じてＨＰを削ることができるため、
アナログな評価ができていいと思っていたので、最初の頃から実装する気でした。
前回プレイしてもらったプロトタイプの段階で、すでに入っています。

これは、一般的なFPS（一人称視点シューティング）の
「防弾チョッキ」に代表されるシールドシステムを参考にしています。
シールドという表現なら、最近ではHALOシリーズや
アーマードコア4などの方がイメージに近いかもしれません。

このゲームは、敵がランダムな位置に登場する都合上、
突発的なダメージがさけられない場合があります。
このシールドは、その理不尽さを抑えると共に、操作が分からない
序盤で、死なないようにするためのシステムでもあります。
（連射力の低い敵一体なら、放置しててもやられることがない！）

シールドがかなり強力なので、シルドラゼロにおける
ＨＰは、実際のところあまり大きな意味がありません。
ＨＰが100以下になっても、慎重に戦えば長く戦えるからです。
その状態でも、小さいミスなら10回分くらい耐えるのです。

個人的にこのゲームのＨＰとは、集中力を喚起するための数値だと
とらえています。残りＨＰ２桁でステージをクリアしたという人も
実際、少なくないと思いますが、それはＨＰが２桁になってから、
集中力と慎重さが極限まで上がったからだと思いますよ！

<hr size="1" />
<strong><span style="font-size:medium;">【ボツになった武器】</span></strong>

実は、ボツになった武器があります。それは「<span style="font-size:medium;"><strong>機雷</strong></span>」です。

「設置すると、一定時間後に爆発して周囲の敵に大きめのダメージを与える」
という武器だったのですが、実はこれ、要素だけ見ると
「当てるまでに時間がかかる」「範囲攻撃」という２点が、
まったく熱核砲と同じで、使用感もおおよそ一緒だったんですね。

リミットブレイカーと、機雷と、どちらを入れようか
迷っていたのですが、結局、コンボを無限に続けられるチャンスとして
リミットブレイカーを残すことに決まりました。

でも今になって思うと、機雷の範囲を狭くして、威力を極端に上げれば、
もう少し個性化ができたのかもしれません。
ただ、対要塞タイプにしか、使えないかもしれませんけれどね。
（普通の敵は基本的に自機との距離を取ってくるので、近付いて来ない）

<hr size="1" />
というところで、第二回、武器編は以上です。

他にもまだまだ、
「敵キャラの案」に「ランダム出現システムでなるべく面白くする方法」、
「キャラクター」「物語」など、たくさん考えることがありました――。

（次回へ続く）

<hr size="1" />
今回も、暖かい拍手コメント、参考になったというコメント、
どれも、本当にありがとうございました。
シル学のラストスパートに向けて、励みになります。

では作業を再開します。</div>

</body>
</html>