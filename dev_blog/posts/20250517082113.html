<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>ウディタ3.6へ！バグ修正再び！ + 私がいなくなった後に備えて</title>
<script>
function toggle(id){
 var e=document.getElementById(id);
 if(e.style.display==='none'){e.style.display='block';}else{e.style.display='none';}
}
</script>
</head>
<body>
<h1>ウディタ3.6へ！バグ修正再び！ + 私がいなくなった後に備えて</h1>
<div>2025-05-17 08:21:13</div>
<div><TABLE padding="15px"><tr><td align="left" style="line-height: 1.5; word-break: break-all;">　ウディタ3.5ベータ公開から約120日で108回更新して520点以上直したウルフです。

　ということで、Ver3.500公開から0.001ずつしかバージョン上げてなかったのに日々のバグ修正などだけで100回に達して無理矢理Ver3.600に達してしまいました！　普通ないですよそんなの！

　が、<span style="color: #d50000"><span style="font-size: 150%"><B>Ver3.6記念の新機能</B></span></span>もちゃんと用意してあります！
　「なんでほぼ毎日バグ修正してるのに新機能用意してんの！？」って私も思いますが、実際のところバグが1日3～5個くらいだったらちょっとだけ時間が余ることが多いので、創作作業に頭のスイッチを切り替える時間がないときに、ちょっとずつタスクリストの開発作業を進めていたのです。
　メイン部分と関係ない増設箇所なら、1ヶ月かけてちょっとずつ作り続けても本体には何も影響ないですからね！<span style="color: #42a5f5"><span style="font-size: 80%">（一方で、メイン部分に食い込む部分の大規模改修は大きくまとまった更新休止期間がないと直すのが超面倒です。Gitではブランチを分けて作業して後でマージするという手段も与えられてますが、同じ場所をいじるはめになったらバッティングしちゃってソース管理が面倒すぎる！）</span></span>

<HR><span style="font-size:large;"><B>◆今回のウディタバグ修正 ピックアップ</B></span><HR>
　毎回10数回分の更新履歴をそのまま載せるのも読みにくくてアレなので今回は重要そうな内容だけまとめてピックアップします！
　ちょっと余裕があるときはそういう書き方をしていこうと思います。<span style="color: #d50000"><span style="font-size: 150%"><B>この2週間でも45個くらい</B></span></span>直しちゃったんで要点だけにしないと読むのも大変！

　なお新機能の『タスクリスト』と『合成音声』に関してはこちらの動画でも紹介しています！
　具体的な使い方が分かりにくいかもしれないので見られる方は動画をご覧になるのがおすすめです！
<iframe width="520" height="300" src="https://www.youtube.com/embed/1t512uxOqxA?si=AIewXUKCwXHy2L7O" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>


<HR>
<span style="font-size:120%;"><B>【重要な新機能！　タスクリスト！】</B></span>


<span style="color: #d50000"><B>●<span style="font-size: 150%">【タスクリスト/新機能】</span>
　エディターに「タスクリスト」ウィンドウが搭載されました。
→ タスク（作業）を「登録」、「完了」できるだけでなく、項目内に「マーカー」をセットすればその項目をダブルクリックするだけでその作業位置を開くことができるため「ブックマーク」としての活用も可能です！</B></span>
（たとえば、マーカーを付けておけば「特定のマップのEvの特定ページの指定行」や「ユーザDBの特定タイプの特定データの特定項目」を一瞬で開くことができます）

<img src="https://silversecond.net/data/p_diary5/20250517A.png" border="1" style="max-width:320px;" loading="lazy">

→「マーカー」の入力時は、「現在開いている箇所」が登録されます。
 　たとえば「MapEv」マーカーボタンを押すと、現在開いているマップイベントの「マップ・イベントID・ページ・行数」が「＜Map1 Ev7 P1 0＞」という文字列としてマーカー登録されます。

→ 「完了」タブの項目には日時も記録されます。きっちりタスク管理していれば、完成までの道筋を時系列的に振り返ることもできるでしょう。

<span style="color: #2196f3">→　次の作業を思い出すときも、次の作業地点に移動するときも、とにかく作業再開までの時間を短くできます！　私を含め、次の作業を忘れがちな人にとっては地味に開発速度アップにつながるはずです。</span>


<HR>
<span style="font-size:120%;"><B>【プチ新機能！　合成音声！】</B></span>


<span style="color: #d50000"><B>●【文字列隠しコード/新機能】Windowsの合成音声で読み上げさせる隠しコード
＜＜MS_VOICE_PLAY/SPEED=(数値)/VOL=(数値)/VOICE=(合成音声名)＞＞(読み上げ文字列)
 を追加。</B></span>
 
→　たとえば「文字列操作」の「隠しコード実行」を選び、「手動入力」欄に
　「＜＜MS_VOICE_PLAY/SPEED=1/VOL=100/VOICE=Microsoft Haruka Desktop - Japanese＞＞読み上げ文」
　と指定すると、速度+1、音量100で日本語の
　「Microsoft Haruka Desktop - Japanese」ボイスで
　「読み上げ文」と合成音声で再生されます。
　パラメータはいずれも省略可能で、
　最小入力だと「＜＜MS_VOICE_PLAY＞＞こんにちは」だけでも再生可能です
　返り値は常に「1」が返されます。
<span style="font-size: 80%">- SPEED（再生速度）:-10～10(高速)までの範囲で指定。「0」がデフォルトで、標準速度です。
- VOL（音量）:0～100(デフォルト100)までで、「Sys102:SE音量補正[%]」の影響を受けます。
- VOICE(合成音声名)に指定できるのは、Windows側で認識されている合成音声名です。
　デフォルト音声はプレイヤー側のWindows設定によって変わります。
　Windows11の初期状態では、合成音声名として
「Microsoft Haruka Desktop - Japanese」か
「Microsoft Zira Desktop - English (United States)」のみ指定可能です。
　これを指定しない場合は「最後に使用された合成音声名」が選ばれている気がします。
　使用可能な合成音声リストは後述の＜＜GET_MS_VOICE_LIST＞＞で得ることができます。</span>

→　もしすでに合成音声が再生されている最中に新たに再生しようとした場合、前の合成音声は中断され、新しい音声のみ再生開始されます。

<span style="color: #2196f3">→　基本的にはHarukaしか使えなくて選択の幅は狭いのですが、読み上げなきゃいけない量が多いゲームにオプションとして付いてるだけで、人によっては実況プレイがだいぶ楽になります！　もちろん、全部読み上げて雰囲気を盛り上げる実況者さまもいらっしゃることも考慮して搭載したいですね。</span>


●【文字列隠しコード/新機能】使用可能なWindowsの合成音声名をリストアップする
　隠しコード ＜＜GET_MS_VOICE_LIST＞＞ を追加。
　
→ 前述の＜＜MS_VOICE_PLAY＞＞で使用可能な合成音声名を1行1つずつリストアップします。
　日本語版のWindowsのデフォルトだと、おそらく以下の文字列が返されます。
　Microsoft Haruka Desktop - Japanese
　Microsoft Zira Desktop - English (United States) 
　いずれか1行を＜＜MS_VOICE_PLAY＞＞の「VOICE=(音声名)」の(音声名)に指定することで
　合成音声を指定可能です。名前がとても長いので注意してください。

→ Windows側のナレーター機能を見るとこれ以外にも音声が入っていることがありますが、
　通常はそのうちの一部である上記2つしか表示されません。
<span style="font-size: 80%">※ウディタ内では「SAPI5」という古めのフォーマットによる合成音声のみ使用可能で、それに該当するのが基本的には上の2つなのです。
（個人でWindowsにインストールした合成音声がSAPI5フォーマットでしたら、ウディタ内でも再生できる可能性があります）</span>



●【文字列隠しコード/新機能】Windowsの合成音声が再生中なら1、
　そうでなければ0を返す隠しコード ＜＜GET_MS_VOICE_PLAYING＞＞ を追加。
→ 前述の＜＜MS_VOICE_PLAY＞＞で音声を再生している最中に
　この隠しコードを実行すると「1」が返されます。
　再生中でない場合は「0」が返されます。
　合成音声の再生終了を待ちたい場合などにご利用ください。


<HR>
<span style="font-size:120%;"><B>【新機能、もっと大きい文字も選べるようになりました！】</B></span>


<B>●【エディターオプション/新機能】
・フォントタイプとして「Segoe UI」を追加（言語によらず表示しやすいフォント）
・各フォントのサイズに「(大/UI崩れｱﾘ)」を追加。</B>
　たとえば「Meiryo UI(大/UI崩れｱﾘ)」などが選べます。
 → 一部で文字がボタンやウィンドウ外にはみ出す可能性がありますが、これまで以上に文字を大きくできます。もう細部の調整とか考えないで利便性のためにとりあえずで実装できちゃえるのがインディー魂だ！


<HR>
<span style="font-size:120%;"><B>【そして重いのもあるバグ修正の数々……】</B></span>

　今回は挙動に明らかに影響があったり変化があるバグだけピックアップしてご紹介！　まだまだかなり直さないとマズいバグがあることが分かります。
　コードが巨大化しててあまりに複雑に絡み合っているせいで、一部をいじったら他のバグが複数出たりするので、超巨大ですでに歯抜けだらけでグラグラしてるジェンガから一個抜いて上に置き直すみたいな緊張感ある作業が続いています。


<span style="font-size: 150%"><B>【ゲーム部のバグ修正】</B></span>

●【ゲーム起動時/不具合】
　Log.txtがDataフォルダ内に作成されてしまっていたバグ修正


<span style="color: #d50000"><B>●【文字列操作/不具合】
　「に↓から指定文字まで切出(+↓文ｶｯﾄ)」コマンドで「指定文字」がヒットしない場合、左辺に「＜＜NotFound＞＞」が出ずに左辺に右辺の内容がそのまま入って右辺が空になるバグ修正</B></span>
→ 「指定文字」がヒットしないときの正しい挙動は「左辺に＜＜NotFound＞＞が入る」「右辺はそのまま」です。
→　割と大きなバグです。「指定文字」がヒットしない可能性のある処理では挙動が変わってしまうので修正対応が必要です、よろしくお願いいたします！



<span style="color: #d50000"><B>●【変数操作+/不具合】
　「位置」の「画面座標」の「px座標の最も上ﾋﾟｸﾁｬID[Zオーダー加味]」ないし「px座標の最も上ﾋﾟｸﾁｬID[ピクチャIDのみ考慮]」、「ピクチャ」の「マウス重なってる？[1=YES]」において、「エフェクト」の「キャラ」→「ピクチャリンク」されたピクチャがリンク座標補正を加味できてなかったバグを修正</B></span>
<span style="color: #2196f3">→　これも新機能周りのバグで修正が大変だったものです！　関連処理をかなり根本から修正することになったので、もしピクチャの当たり判定関連で新たな問題が出ていた場合はお知らせください。</span>


●【変数操作+/不具合】「エフェクト」でキャラに「ピクチャリンク」したとき、「位置」の「画面座標」の「px座標の最も上ﾋﾟｸﾁｬID[Zオーダー加味]」ないし「px座標の最も上ﾋﾟｸﾁｬID[ピクチャIDのみ考慮]」、「ピクチャ」の「マウス重なってる？[1=YES]」をしたとき、リンク分の座標が同フレーム中に反映されなかったバグを修正
　→　要するにマウスでのイベントID取得が一部でうまく動かなかったということです

●【文字列操作/不具合】
　「キーボード入力」後、入力された「＜R＞」「＜C＞」「＜L＞」の文字を削除するよう修正
　→ これらの各特殊文字が変換されて動作してしまう問題があったためです。
　　従来もこれらは表示されませんでしたが、これらを入れた部分が特殊文字として機能してしまっていました。


<span style="color: #d50000"><B>●【文字列操作･隠しコード/不具合】
　＜＜GET_IMAGE_ARGB～＞＞、＜＜GET_IMAGE_SIZE＞＞、＜＜LOAD_IMAGE_TO_XY/～＞＞など画像の情報を取得する隠しコードを使った後に「ロード」して、再びそれらの画像情報を取得したり、取得したXY配列から＜XY_IMAGE/～＞でピクチャ表示しようとするとクラッシュすることがあるバグを修正</B></span>
<span style="color: #2196f3">→　原因を探すのも大変でしたが割と起きやすくてヤバいバグでした！</span>


●【エフェクト･ピクチャ/不具合】
　「エフェクト」の「ピクチャリンク」で「ピクチャのまま」にセットすると、そのピクチャが2重に重なって表示されてしまうバグを修正


●【サウンド/不具合】「BGS」のフェードアウトが効かない状況があったバグを修正


<span style="color: #d50000"><B>●【条件(文字列)/不具合】「が最後にある」分岐で「右辺」の文字列のバイト数が「左辺の文字列+1」だった場合、必ずその条件が成立してしまうバグを修正</B></span>
　→　とんでもなく見つけにくいバグでした


<span style="color: #d50000"><B>●【ピクチャ/不具合】「表示」「移動」の処理フレームの途中だったピクチャがある状態で「セーブ」したとき、「ロード」時にそのピクチャが「(0，0)座標、角度0、拡大率100、不透明度0」を元の状態として移動している扱いになってしまうバグ修正</B></span>
　→　うちの開発中のゲームでも起きてたのですが何が起きてたのかよく理解しておらず、これまで直せていなかった部分です。



<span style="font-size: 150%"><B>【エディター部のバグ修正】</B></span>

●【マップイベント･検索/不具合】マップイベントウィンドウで「置換」をおこなったとき、セーブ可能フラグが立たなかったバグを修正


●【DB操作/不具合】Ver3.593～3.594のみ、「XY配列」が指定されたコマンドを「編集」するだけでクラッシュする現象が
　起きていたバグを修正


●【コマンド編集時/調整】コマンドの「編集」時、「Esc」を押すとキャンセルしてウィンドウを閉じられるように修正


●【ゲーム基本設定Pro/不具合】
　「起動時メッセージ」の<GUAGE>は正しくは<GAUGE>だったのを修正。
　また、ゲーム側ではどちらもゲージに変換できるよう両対応に。


●【動作指定/調整】メニューバーの「移動コマンド挿入」「方向転換コマンド」が<span style="font-size: 150%"><span style="color: #d50000"><B>ウディタVer1からずっと機能していなかった</B></span></span>ので削除
<span style="color: #2196f3">　→　何があったかというと、メニュー欄は作っていたのに選んでも何も入力されないままでした。つまり形だけ作って未実装だったわけです！
　いくらなんでも17年間もかくれんぼに成功する未実装要素があるとは思いませんでした。君たちがかくれんぼナンバーワンだ……！（そういいながら削除）</span>
<img src="https://silversecond.net/data/p_diary5/20250517B.jpg" border="1" style="max-width:520px;" loading="lazy">

<HR>
　という感じでした！

　ウディタ修正もまただいぶ忙しいことになってますが、他にも実は裏でアルバイト中です！！　ウディタの修正が忙しくてアルバイトに回す時間すらギリギリで朝から晩まで本当にみっちり作業してる気がします！　そろそろちょっと休みたいかも！！
　ウディタ事業は常に資金難なので、ご支援くださっている皆さまにはいつも本当に助けられております！　ありがとうございます！！
　
　しかしこの調子だと、ウディタ修正でヒーヒー言いながらウディコンシーズンに突入しそうで、ゲーム開発に着手できてない期間が1年に突入してしまうかもしれません。すでに8ヶ月半です。去年のウディコン後から始まったVer3.5への更新は、得たものはとても大きいんですが、私の負担も想定以上に厳しい！
　緊急バグ対応に備えていると創作に集中するための深い思考をするのが絶妙に難しいので、いっそのこと「あいだの期間」にしかできない区切り作業を今のうちにやってみようかと考え中です（後述）。

　とにかくできる限り、日々全力を尽くしています。さらなる効率化、工夫ができないかも考えながら！
　応援して下さる皆様、いつも本当にありがとうございます！


<HR><span style="font-size:large;"><B>◆おまけ：私がいなくなったときに備えたい/アーカイブ化</B></span><HR>
　今回のおまけ内容は、「私が急にいなくなっても大丈夫なようにしておきたい」プロジェクトの話です！！

　最近、亡くなった人をたびたび思い出して悲しみに暮れたりもしていますが、それと同時に自分の終わりを意識し始めたので、なるべく自分の関わったものを長く残せるようにしたい気持ちが湧いてきました。

　というのも、私の公式サイトやウディタサイト、ウディコンサイトのサーバーやドメインは、レンタルサーバーだったり自分用ドメインをお金を払って使わせてもらっていたりして、要するにこれら全部<span style="font-size: 150%"><span style="color: #d50000"><B>『借り物』</B></span></span>なんですよ！
　で、今はそれらの使用期間を定期的に延長して使っているのですが、もし私に何かあると1年後には全部消滅しちゃうわけです！

　まあ私個人の作ったものがネット上から消えること自体は、別にそれはそれでもいいと思っているとはいえ、<a target="_blank" href="https://silversecond.com/WolfRPGEditor/Contest/"><B>ウディコン</B></a>に関してはどう考えてもみんなで作り上げた公共物なので、結果発表くらいはアーカイブとして残したいと思います。
　私もコンテストパークのページが消えちゃって、賞をいただいた歴史が消えて少し悲しんでいましたからね！！　それに、参加された方にとっては普通に経歴の証明にも使えるはずですし。

　あと私の公式サイトや作品紹介などに関しても、私がいなくなった後にお参りできる先やゲームをダウンロードできるリンク先まとめみたいなのがあったほうが便利でしょう。そこはウディコン結果を残すことに比べたら「ついで」のオプション任務くらいの気持ちで優先度は低いんですけどね。

　とにかく、ウディタ修正の構えのままであんまり動けないこのタイミングで、ぼちぼちそういったアーカイブ化計画も進めようかなと検討中です。


<B>【具体的な計画は？】</B>

　で、『無料でページを置けて、長く残りそうなところ』を使わせていただきたいんですがありますかねえ！？　と思って調べた限り、今のところ『Github Pages』などが有力候補になっています。

　『Github Pages』はプログラムのソースコードを置けるサイト『Github』内にファイルを置いてサイトにできる機能です。Githubつながりだからといって別に自作プログラム置き場として使わなくてはいけないわけでなく、静的サイト（＝掲示場などのサーバープログラムを置かないサイト）として個人ブログやポートフォリオを置いたりするのに使っていいとのことなので、歴史的資産としてウディコン結果発表ページを残すくらいは許されると思います。いつデータが消されちゃうかはGithubさんちのご機嫌次第ですけどね！
　でもサイト丸ごとダウンロードしやすくなるでしょうから、残したい人がいればいざというときのミラーもしやすいかも？　日本のフリーゲームの歴史を追う人の助けになるかもしれません。

<span style="color: #A0A0C0">　ほかに、20年以上の歴史があって無料でも置きっぱなしにできそうなサーバーの候補としては、日本だとxreaなどがあるんですが、そちらはSSLに対応してなくて、近いうちに普通のブラウザで見られなくなるかもしれないのが悩みどころでした。
</span>
<HR>
　何はともあれ、せめてウディコン結果発表ページのアーカイブは長年残せるようにしたいと思っております！　そこだけは私が急にいなくなっても安心できるようにしておきたいです！
　これらはゲームを1本作るのに比べたら、やる気さえ出せばたぶん息を吐くくらいのコストでできることなので、この機会に少しくらいのサイト整備リソースを支払ってもいいチャンスのはずです。

　何度も言いますが一番残したいのは、15年以上にわたるウディコンへの『エントリーして下さった皆さまの作品の存在』と『遊んでくださった方々の情熱のコメントがあった』ということ！
　たぶんゲームのファイルは長くバックアップできませんけども（基本的にどういったストレージも、私がログインしないとデータ消されちゃうんですよね）、皆さんの作品が存在して、それがどういう感情を生み出してきたのか、といった歴史だけなら、きっとそこそこの期間残せるかもしれません。


　どうか願わくば、みなさんの情熱の足跡が少しでも長く歴史に残せますように。</td></tr></table></div>

</body>
</html>