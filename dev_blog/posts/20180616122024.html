<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>地道な調整＋顔グラ小話</title>
<script>
function toggle(id){
 var e=document.getElementById(id);
 if(e.style.display==='none'){e.style.display='block';}else{e.style.display='none';}
}
</script>
</head>
<body>
<h1>地道な調整＋顔グラ小話</h1>
<div>2018-06-16 12:20:24</div>
<div><strong><span style="font-size:large;">【地道な調整】</span></strong>

現在の状況ですが、前回に引き続き
『片道勇者2』の基本処理のオーバーホール中です！

2割くらいの人に伝わればいいかなくらいの言い方になりますが、
じっくり処理を見直していると、『片道勇者2』のほぼ全ての重要箇所を制御している
「テキストスクリプトを処理する部分」が非常に重いことが分かりました。

「テキストスクリプト処理」はキャラクターの会話イベントなどの処理だけでなく、
カードの処理などもこれでおこなわれているのですが、
カード周りの初期計算を何枚分かおこなうだけで平気で20ミリ秒くらいの
時間がかかってしまうくらい負荷が高かったので、今はそこを大規模改修中です。
（毎秒60枚更新されているゲームは「1フレームあたり最大16.6ミリ秒」しかかけられないため、
1処理で20ミリ秒もかかるほど重いと処理落ちしてしまうのです）

うまくやれれば3倍以上、運がよければ5倍くらいの処理速度になりそうなので、
アルファ1の内容が『片道勇者1』に近い負荷までおさまるかもしれません。
そこから追加で状態変化の処理や新システムが入るので、
処理はまた重くなるんですけどね！

他には描画周りも最適化を試みていて、こちらも3割か4割か高速化できそうなので、
「処理が重すぎて動かないんですけど！」とフィードバックを寄せてくださった方も、
もしかしたら次のアルファ2では少しくらい動くようになるかもしれません。

色々と課題がある「ゲームシステム部分」にも早く着手したいのですが、
もうしばらくはこれらの基本処理の負荷問題への対応が続きそうです。

<hr size="1" />
<span style="font-size:large;"><strong>【おまけ　ゲームのお絵かき話】</strong></span>

状況報告だけというのも何なので、今回はゲームのお絵かき話を一つ！

テーマは「顔グラフィックについて」で、
<strong>「実は顔のパーツの『まゆ』と『くち』の
差分だけでいいなら低コストで表情が増やせるんです！ 」</strong>
という話を説明するための見本を描いてみました。
↓
<a href="http://silversecond.net/data/p_diary4/20180616A_big.jpg" class="blue"><strong><span style="font-size:x-small;">【クリックで拡大】</span></strong>
<img src="//silversecond.net/data/p_diary4/20180616A.jpg" border="1" title="使う人がいるか分かりませんが、右下の@WO_LFを消さなければ資料などに使ってくださっても大丈夫です"></a>

ゼロから描き直さなくても、「まゆ」と「くち」を変えるだけで新しい表情が生産可能！
「こんなの当たり前じゃないか！」と思われるお絵かき担当の方も多いかもしれませんが、
どちらかというとこれは、「<strong>発注者さん</strong>」側に
知っておいてもらえるとよさそうな話です。

というのも、まだ慣れていない未熟だった頃の私のような方や、
普段は絵を描かれない発注者さんだとこれに気付いていないことが多くて、
「表情を1つ増やすために毎回ゼロから描き直したり」する判断が
頻繁に発生してしまいがちです。
そうなると作業コストが増してしまったり、
クオリティの維持も大変になってしまいます。

（※熟練のイラストレーターさんは平然とやっているように見えますが、
たとえ同じキャラクターでも、ゼロから描き直した顔を
何度も同じ度合いでかわいく/かっこよく描いたりするのも、
とても高度な技術や時間が求められる仕事です）

一方、上の見本のように「顔の方向が固定」で、
「まゆ」と「くち」（さらに追加で「目」や「漫符」）だけの変化でよいなら、
比較的簡単かつ安定して表情のバリエーションを増やすことができます。

もちろんこだわるなら全部バシッと描き直しても何も悪くないのですが、
「同じキャラの顔がなかなか同じように描けない」私のような人間だと
これはとても重宝するやり方でした。

たとえば、どうして『シルフェイド見聞録（未完）』の顔グラフィックの表情差分が
全体的に「変顔」だったかというと、この方法を知らなかったので、
あえて「変な顔」にすることで同じ顔を似せて描く必要がないように
しないといけなかったからですね！
当時の私の技量では、同じキャラであっても
2回目を書くと別人の顔になってしまっていたのです。

今でも同じキャラを同じように描くのは難しく、すごく時間がかかるので、
結果に大きな影響を与えないのならよくこの手を使わせていただいています。
また発注者のかたなら、こういったオーダーなら
絵の担当の人が忙しくても比較的通りやすいと思うので、
知っておくと演出の幅を増やせる場面があるかもしれません。

<hr size="1" />
今回のは個人開発者の皆さまにもよく知られていそうなレベルの話だと思いますが、
「ゲームならでは」の効率良くやれる方法は他にも色々ありそうなので、
こういった効率化のテクニックも色々学習していきたいところです。
ゆっくり作れる状況より、急いで作らないといけない状況の方がどうしても多いですからね！</div>

</body>
</html>