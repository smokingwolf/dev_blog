<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>ウディタ大規模アプデの機能 1</title>
<script>
function toggle(id){
 var e=document.getElementById(id);
 if(e.style.display==='none'){e.style.display='block';}else{e.style.display='none';}
}
</script>
</head>
<body>
<h1>ウディタ大規模アプデの機能 1</h1>
<div>2022-06-25 11:55:51</div>
<div><span style="font-size:large;"><strong>【ウディタ大規模アップデートで搭載される機能 1】</strong></span>

ここしばらくは9～10月公開予定の大規模アップデートに備えて
ウディタの修正作業を続けています。
ということで大規模アップデートで搭載予定の機能の一部をご紹介！

<hr size="1" />
<span style="font-size:large;"><strong>●コモンイベントの入力が4つから5つに増加！</strong></span>

<img src="https://silversecond.net/data/p_diary5/20220625B.png" border="1" width="520">

なぜか最初から5つめが使われていなくて、
数値変数4つ、文字列変数4つだったのですが、
『片道勇者2』でいよいよ足りなくなったので今さら5つずつに拡張されます！

<hr size="1" />
<span style="font-size:large;"><strong>●POST送信機能の実装</strong></span>

<img src="https://silversecond.net/data/p_diary5/20220625A.png" border="1" width="520">

ごく一部の人にだけ念願のPOST機能を搭載！
ほとんどの人には何を言ってるのか分からない機能！

従来はGET方式<span style="color:#3366FF">(https://～～/aaa.cgi?code=12345&name=uhoho というURLを開くと
「aaa.cgi」というサーバプログラムにクエリ部分「code=12345&name=uhoho」の
情報を送ることができる）</span>でデータを送ることができましたが、
こっちはもっと直接的にデータを送ることができる処理です。

具体的に何ができるようになるかというと、
通常10KB未満しか送れないGET方式に比べると
ほぼ送信量無制限でサーバにデータが送信できます！
とはいっても通常は最大1MB以内くらいが望ましいはずです。

これによって、PHPなどでサーバ側のプログラムを組める方なら、
下のBase64変換機能と合わせて
ゲーム内からTwitterにスクリーンショットを送信できたりします。

この辺のサポートは、きっとコモンイベントとサーバプログラムを
セットで作ってくださる方を待つしかないでしょうね。
自分でサーバプログラムを設置するのも結構ハードル高いですが、
この辺の組み合わせが使えると
ランキング機能やリプレイ機能やスクリーンショット共有などなど夢が無限に広がります！
まあランキングくらいならGET方式でもできないことはなかったんですけども、
POST形式だとセキュリティ的にいたずらしにくくなるのが一つの大きな利点です。

<hr size="1" />
<span style="font-size:large;"><strong>●文字列操作：バイナリファイルをBase64で読み取る機能。</strong></span>

普通の方は「そもそもまずBase64ってなに！？」と思われるはずです。
Base64というのは、本来人間が文字として読めないデータである
バイナリファイル（EXEとかJPGとか）のデータを、
0～9、a～z、A～Z、+、/の合計64種の文字だけで表される情報に
変換するフォーマットです。

で、次回のウディタに搭載されるのは、バイナリファイルを読み込んで
Base64に変換しウディタ内で扱える「文字列変数」として得る機能！

これができると何が嬉しいかというと、
たとえば、実は「メール」って本来は文字以外を送ることができないんですが、
画像などのバイナリファイルを「Base64」に変換してメールの後ろ部分に書き込むことで、
0～9、a～z、A～Z、+、/の文字だけで「画像の添付」を実現させているのです！

他にもこんな風に、ネット上でのデータのやり取りで
Base64変換が使われることはとても多いです。
Twitterに画像を送りたいときもBase64化した画像データを送りますしね。
といいますか、主にそのためだけにこの機能を実装したんですけれども！

そんなわけで、「文字列操作」に
「Base64でファイルを読み込み」する機能を搭載予定です。
これは一般公開版で使えますのでご安心を。


<strong>【実は出力機能もあるけど……】</strong>
一方で、Base64文字列を「バイナリファイルとして出力」する機能も
作るだけ作っています。

ですが、Base64をバイナリとして出せるということは、
実はウィルス入りバイナリファイルとか作り放題になって危なすぎるので、
そちらは検討中の「ウディタプロ版（有料ライセンス版）」
のみに搭載予定です。
（かつ、EXE形式やその他ウィルスに使われそうな私が思いつく形式のファイルは
直接Game.exeからは作れないようにします）

バイナリファイルを作れる機能の使い方なんて
今の私だとそんなに思いつかないのですが、
知り合いが出してくれたアイデアとして、
「Base64読み書きを活かして画像の末尾にデータを入れたり（して交換）できるかも」
という発想がありました。
キャラ絵の画像にデータをまとめられるなら、
渡すデータがコンパクトにできていいですね。
（といっても、本当にできるかは分かりませんよ！）

<hr size="1" />
<span style="font-size:large;"><strong>●DB操作　　データ新規挿入・データコピー・抜き取り処理を実装</strong></span>

これまでありそうでなかったデータの挿入・コピー・抜き取りができます。
これでデータの並び変えなどが非常に簡単になります！
プログラミングでいう「構造体」単位で抜き差しできるので超便利！
（これまでは1データ抜けるたびにそれ以後の全データを
1項目ずつ上にコピーしなきゃいけなかったので操作量が凄くなりがちだった）

<img src="../image/2022/20220625.jpg" border="1">

<hr size="1" />
などなどマニアックな機能から普段使いしたい機能まで色々搭載予定です！
これらもほんの一部ですので、続報にご期待ください。</div>

</body>
</html>