<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>ウディタ大規模アプデ内容予告7 仕上げ中</title>
<script>
function toggle(id){
 var e=document.getElementById(id);
 if(e.style.display==='none'){e.style.display='block';}else{e.style.display='none';}
}
</script>
</head>
<body>
<h1>ウディタ大規模アプデ内容予告7 仕上げ中</h1>
<div>2022-11-12 10:18:00</div>
<div><span style="font-size:large;"><strong>【ウディタ大規模アプデ内容予告7 仕上げ中】</strong></span>

前回言ってたUnicode化は本当にエディターの隅から隅まで
全部いじってなんとか済ませました！！

で、そこからはリリースに向けてここ1週間くらいずっとバグ修正や機能修正をしていました。
ネタがないので今回はその「1週間」でいじった修正点の数々をご紹介します！
小さいのも含めれば全部で130個以上！　1日18個！
1個数時間かかる難易度のバグ修正から10分で終わる微調整まで様々ですが、
リリース前はこんな勢いでいじっているんですよ。

<img src="../image/2022/20221112.jpg" border="1" width="450">
<CENTER>
<table width="95%"><TR><TD align="left"><span style="color:#3366FF"><span style="font-size:x-small;">●Game：右上・右下基準のピクチャだけ移動時にX座標がずれて表示されてしまうバグ修正
●Game：Ver2.29モードにしたら変数操作+の「位置」処理でエラー出ないように修正
●Game：Ver2.29モードにしてもタイル関係の処理がずれてたバグ修正
●Game：デバッグウィンドウが文字化けする現象を修正
●Game：古すぎるData.wolfを開こうとしたときのエラーでメッセージボックスが文字化けする現象を修正
●Editor：DB画面で一個消してOK押すとクラッシュするバグ修正
●Game：最初にクリップボード情報が読み込まれそうになったときに確認メッセージが出るよう修正
●Game：セーブデータを読み込み中、変なところでユニコード済みフラグが1になってしまいSJISのままになってしまう場所があるバグを修正
●Game：【DB操作】「50バイト超の『データ名』で名前呼び出し」をするとエラーが発生するバグを修正
●EditorPro：「プロ機能」を編集してＯＫ押しても更新されないバグを修正
●Editor：タイルセット設定の最下部のラインが2つ抜けてるバグ修正
●Editor：遠景として設定したのと別の画像が出てしまうバグ修正
●Editor：Ver3への初期コンバート時、CSVも変換するように修正
●Editor：Ver3への初期コンバート時、「Ver2.29にバージョン調整を切り替えるか」質問を追加
●Editor：タイル設定にて、基本タイルがないときもスクロールできてしまうバグ修正
●Editor/Game：文字列操作の「ファイル読み込み」に文字コードを選べる機能を追加。
　　　　旧バージョンから移行した「文字列操作」コマンドは全部文字コード「自動判別」になります。
●Editor：DB操作にてDBタイプ番号の「名前」にチェック付けてプルダウンから選ぶとクラッシュする現象に対応
●Editor：コモンイベントの名前の色コードが右端に見えてしまうのを修正
●Editor：コンバートしたTXT・CSVファイルに全部BOMを付けるように変更
●Game：&lt;&lt;GET_FILENAME_FROM_PICTURE&gt;&gt;をピクチャ0枚のときに使うとクラッシュするバグを修正
●GamePro： マップエフェクトで全然関係ないエフェクトが起動してしまう謎の問題を修正
●Game：コモンイベントが自身を呼び出し続けると265回でクラッシュするバグを修正。
●Game：システム変数143：[読]処理可能ｺﾏﾝﾄﾞ[通常0/プロ版1]　を追加　　
●Editor：ゲームデータ作成時にタイトルの処理がおかしくなるバグを修正
●Game：10年前くらいのVer1.X時代のセーブデータが読めない問題にいくらか対応（昔のものを正しく判別できないので完璧ではありませんが読込成功率はアップ）
●Editor：ピクチャファイル入力欄に見えないスピンボックス分だけ入力ボックスの右側が欠けて見えていたので、目立ちにくくなるよう修正
●Editor：エディターオプションを変更しても反映されないことがあるバグを修正。
●Editor：コンバート時の動作バージョンVer2.29切り替え提案の文章を気付きやすい場所・内容で出るよう変更
●Editor：エディターオプションの遠景の設定を修正。
　　　1枚だけ表示する 　ループ表示する　表示しない　から選べるように。
●Editor：【変数操作+】「その他」の「現在のマップのタイルセット番号」がイベント欄で正しく表示されないバグ修正
●Game：【変数操作+】「マップ外」のイベントIDを取得すると-1でなく0が返されるバグ修正。
　　　　　その他、Ver2の挙動を再現するよう修正。
●GamePro：sysS57：クリップボード　で得た日本語が文字化けして読めないバグを修正
●GamePro：プロ機能で「ゲージ画像だけ」を設定した時、ゲージが表示されてないバグを修正
●Game：回数10万回以上にするとキャラ・ピクチャのシェイク速度が２倍になるバグ修正（正確には数値が動いていないせいで半分しか動いていなかった）
●Game　ピクチャエラーだけフルアドレスが出ているのを修正。もとい、緑帯メッセージに絶対アドレスが入っていた場合はEXEまでのアドレスを消して表示するように。
●Game　文字列ピクチャを移動したあとに数フレームかけて消去すると座標ズレが起きるバグ修正
●Editor：背景がないときエラーが無限に出る現象を修正
●Editor：「コモンセルフ使用状況」の項目のずれっぽいのを修正
●Editor：コモンイベント入力コマンドで入力欄などがずれているのをたぶん修正
●Game：&lt;Base64でﾌｧｲﾙ読込&gt;でバイナリファイルを文字列変数に読み込んだ際に文字列変数の最後に必ず改行が入っている現象を修正。
●Game：「フォルダの作成/ファイルコピー/削除」で﻿ファイル名に日本語を使うと正常に処理できないバグを修正
●Editor/Pro：マップに変更を加えた後、プロテクト画面とゲーム設定画面、エディターオプションに入ろうとする前にマップ変更を保存するか聞くように変更（保存しない場合は再起動時にデータが消える）
●Editor　条件(変数)の『4変数を連動』を解除した状態で、2つ目以降の条件にチェックを入れてコモンセルフを選択しようとするとコンボボックスの一覧にコモンセルフが表示されないバグを修正
●Editor：コンバート時の最初の質問のはい・いいえが逆になってるバグ修正、はい・いいえの入れ替え時に変更し忘れ
●Editor：コンバート時の最初の質問でキャンセルすると終了できないバグ修正
●Editor：多重起動できるようになってしまっているのを修正
●EditorPro：基本設定Proのファンクションキー設定をOFFにしても次開くとONになってしまうバグを修正
●GamePro：プロテクト入れただけでセーブ→再起動するとクラッシュするバグを修正
●Editor：イベント制御コマンド欄のラベル名の「可」が消えているのを修正
●Editor：DB操作コマンドを入力するときに数値がゼロになるバグを修正
●Editor：再起動時の内部処理で、「前のプロセスが終了するまで次の起動を待つ処理」が機能してなかったので作り直し。
●GamePro：「ファイル削除」に「./」が含まれているとエラーを出すように修正
●Editor：CSVファイルをタイル設定にドラッグ＆ドロップしたときの座標判定がおかしいバグ修正
●Editor：Editor.iniがない場合でもサンプルデータと同じ各ウィンドウ座標の初期値を入れるよう修正。
●Editor：Dataフォルダが存在しないときは、起動時に空の状態のゲームデータをDataフォルダに作れる処理を作成。これでEditor単体でゲームが作り始められます。
●GamePro：プロ版をちょっと使ったり使わなかったりしたときにセーブデータがクラッシュする不具合がまだ残ってたので修正
●Game：画面サイズを3倍にするとアイコンのY軸に倍率かかってないバグを修正
●Game：キャラ重ねレイヤーは同じサイズにしてくれというエラーが出るように
●Game：最新版のGuruGuruSMF4.dll を使うとPC環境によってはGame.exeが起動しない現象に対応。4.0.6のGuruGuruを使用することでいったん解決。
●Game　他の別名のゲームを開いているときでも多重起動ができなくなっているバグを修正
●GamePro：プロ版使用、かつゲーム設定プロ版で指定できるタイトルバー部分が空だと起動制限に引っかかっていたバグ修正
●Game：画面サイズの最小値を100×100ピクセルに設定。
●Editor：「ゲーム基本設定」にて画面サイズの最小サイズを100未満にしようとすると100に戻される処理を追加。
●GamePro：プロ版で画面サイズ自由設定した後に通常のGame.exeで起動したときに画面サイズが基準画面サイズにならないバグ修正（本来はどれか一番近い解像度が選ばれます） 
●Game：文字列操作の裏技に&lt;&lt;GET_MAPEVENT_NAME_FROM_ID&gt;&gt;と&lt;&lt;GET_COMMONEVENT_ID_FROM_NAME&gt;&gt;を追加。
　　　　ID→名前取得を&lt;&lt;GET_MAPEVENT_ID_FROM_NAME&gt;&gt;に変更
●Editor：コマンド入力の「チップ処理」で最新版挙動でも2.29以前用の注意メッセージが最初に表示されるバグ修正
●Editor：コマンド入力の「場所移動」で右上の注意書きが全部表示されていないミスを修正
●Game/Editor：システム変数　Sys119：基本画面倍率[1-3]　を追加
●Editor/Game：変数操作+の「その他」に「現在マップのマップイベント数」を追加
●Editor：文字列操作　「に↓のファイル内容読込」&lt;UTF-8&gt;を「修正」しようとしたとき、修正画面で「自動文字コード判別」が選ばれてしまうバグ修正
●Editor：データベースエディタの「ファイルの出力」時、【～】が高速点滅している現象を修正
●EditorPro：プロ版コマンドの「ファイル削除」を選んだとき、上の入力欄が「Data/」から始まっていたら「Save/」に切り替わる処理を追加
●マップ縮小表示時に元画面外のイベントが表示されなかったのを修正
●EditorPro：画面サイズの限界に制限が付いてなかった不具合を修正
●Editor：【マップイベントウィンドウ】開いているイベントの座標に「精密」表示を追加。また、半歩上・半歩左による座標補正も加味した座標を表示するよう修正。
●Editor：プロ版かどうか判定するシステム変数がSys142じゃなくてSys143だったミス修正
●Game：横幅に合わせてF9の変数表示の列数が変わるよう修正（F8とF7は縦に超細い画面だと今はどうにもならなさそう）
●GamePro：プロ版でマップのズームをゼロにするとクラッシュするバグ修正
●Game：マップのズームの拡大率0～マイナスは仕様外なのでマップのズームは最低1％以上になるように修正
　　（ズームマイナス時と同等の表現ができる機能の搭載を検討対象に。マップ+EV部分だけ取得できるスクショ機能とか作るの難しいけどいつか欲しいですね）
●EditorPro：ゲームデータ作成時アイコン以外のファイルや存在しないファイルを設定したときにエラーが出るよう修正
●EditorPro：ゲームデータ作成時のアイコンは32x32を強く推奨と記載
●Editor：何も入力せずにMAPを新規作成したらエディターが落ちるバグ修正
●Editor：「マップ設定画面」で「マップ200x200以上は（エディタで）表示できない」という表記を削除
●Editor：マップエディタ上で出るマップチップ一覧の縦軸を伸ばしても描画更新されないバグ修正
●Editor：「エフェクト」の「間隔」表記が全部出てないのを修正
●Editor：「キー入力の許可」欄の各パーツの文字幅を調整
●Editor：「自動キー入力」欄で「マウス」の「位置」をクリックして「マウス」以外に切り替えると「X」表記だけ残るバグ修正
●Editor：「変数呼び出し値一覧」表記にカッコが1個多いミスを修正
●Editor：ゲームデータ作成時、「フォルダ別暗号化」をしたときにアクセス制限がかかって止まる状況があるのを修正
●Editor：エフェクト→マップ→ズームの拡大率欄の名前を「拡大率」→「拡%/1-」にして1以上と分かるように変更。
●Editor：各コマンド入力タブに灰色部分が発生していたのを修正
●EditorPro：「起動後」にプロテクトキー変更しても再起動しないバグを修正
●Editor：無料版で旧コモンを読み込むと文字化けする現象を修正。
●Editor：旧バージョンの外部ファイルや非UnicodeのCSVを読み込んだとき、言語について言及する処理を追加
●Editor：他にコモンが存在するデータで、未編集の真っ白のコモンイベントでキャンセルを押して閉じると「CommonEvent.datファイルがありません」みたいな警告文が出る現象に対応
●Game：ソフトウェアモードにおいて何か表示→エフェクトを連打するとスプライトが無限に増えるバグ修正
●GamePro：スクリーンショットに限り、3Dモードでも表示→エフェクトを連打するとスプライトが無限に増えるバグ修正
●Game：ピクチャエフェクトの変換系をかけたあとに「変換系のみ全解除」をするとスプライトが無限に増えるバグ修正
●Editor：マニュアルを開く　を　オンラインマニュアルを開く　に変更。
●Editor：入力済みの文字列操作をスペースキーで編集しようとするとエディターが落ちるバグ修正
●Editor：特定内容のイベントの挿入処理が入っているとアサートエラーが出る現象を修正 + そのコマンドを「修正」時にもエラーが出る現象を修正
●Editor：いつの間にか起動時のゲージが30％くらいで終わるようになってたので長さを調整
●EditorPro：ゲームデータの作成時にアサートエラーが出るのを修正
●Editor：ファイル選択画面でダブルクリックしたときのおかしな挙動を修正
●Editor：パーティ画像欄の「読込」でタイルセットが選べてしまう問題を修正
●Editor：マップエディターのイベント選択時の赤▽が出てなかったのを修正
●EditorPro：デバッグ用のランタイムライブラリが入ったまま（アサートエラーが出る）だったのを修正
●Editor：コンバート時、320x240の画面サイズを移行したなら画面倍率2倍フラグを立てる処理を追加
●Ediotr：コンバート時テキストデータを拡張子「.mps」にしているとエラーのメッセージボックスがダイアログの裏に出てしまって気付きにくい問題を修正
●Editor：コモンイベントの挿入コマンドを編集しようとすると引数の値が初期化されるバグ修正
●Game：9180007～8の主人公のピクセル補正XYが取得できないバグを修正
●Game：9100007～8によるイベントのピクセル補正XY代入が主人公と違う挙動になっていたバグ修正
●Game：セーブデータが保存できなかったときにエラーが出るように修正
●Editor：変数操作+・条件(変数）・条件（文字列)でコモンセルフ変数の名前を変えても更新されない現象を修正
●Editor：イベントコマンド入力ウィンドウの切り替え時にもコモンセルフ変数名更新処理を追加
●Editor：ピクセル移動は主人公だけがピクセル移動するのが前提でイベント側には使わないこと前提なので「ピクセル移動（α版）」という記載に変更
●Game：テストプレイ時のみ画像読み込み時のメモリ解放をしていなかったバグを修正
●Game：Sys30:プレイ時間（ミリ秒）が　同じフレーム中でもちゃんと数値増えるように　+　同フレーム中なら1000超えするように変更（同フレーム中での引き算で面倒臭くならないように）
●Game：「動作指定」内の変数は、動作指定開始前に全変換して格納するよう修正、コモンセルフも使用可能に
●Editor：コモンイベント時、「動作指定」でコモンセルフ変数を選んで修正すると対象キャラ欄がおかしくなるバグ修正
●Editor：「Sys119：基本画面倍率[1-3]」の名前が「[読]タイルサイズ」になってるミス修正
●Game：ピクセル補正値が1以上になっているイベントが「動作完了までウェイト」オンの動作指定でジャンプすると動作が進まなくなるバグ修正
●GamePro： JPGスクリーンショット機能の保存品質を調整
●GamePro：マップズームアウト機能周りのバグの影響でプロ版でゲームが起動できなくなるバグを修正
●Game：通常ピクチャの角度が0以外の時になぜか2ピクセル下に表示されてしまうバグを修正
●Game：4択の条件分岐へのコモンイベント最適化処理が未実装だったのを修正
●Game：8択など想定外の数の条件分岐があるとゲーム起動時の最適化でクラッシュする問題に対応
●Editor：「DB操作」で上部または下部の「変数」にチェックを入れて100万以上の値を入れても次に開いた時チェックが外れているバグを修正
●Editor：「DB操作」で存在しないタイプ番号を指定し、データ名や項目に空欄の「名前」を指定して入力しようとするとクラッシュするバグ修正（Ver2.29から存在）
●GamePro：スクリーンショットを撮り直してピクチャ表示し直しても画像が更新されない問題を修正。スクリーンショットを撮った時点で全ピクチャの中味を最新画像に更新する仕様に。
●Game：「ゲーム基本設定」の『文字列表示(文字列ピクチャ)微調整』で『横方向の字詰め(ﾋﾟｸｾﾙ)』を0以外にしているゲームをVer3.00に持ってくると文字幅がズレるバグを修正。
　　中味がUTF-8になって3バイトになってたので字詰めも2→3バイト分になっているバグでした。
●Game：未UTF-8化のバージョンをGame.exeだけ差し替えて実行したとき、ゲーム基本設定のバージョン調整が「最新」だった場合は自動で「Ver2.29」として処理するよう修正

</span></span></TD></TR></TABLE></CENTER>
よく見れば急に実装された新機能も混ざっています。

たとえば、
<strong><span style="color:#CC0000">「Ver3のエディタにUTF-8文字コード化するコンバート機能は付けたけど
プレイヤーさん側のセーブフォルダ内にあるデータはコンバートできないわけで、
そこにはSJIS文字コードのも混ざってるから結局ファイル読み込みするなら
文字コード自動判別機能を作らなきゃいけないじゃないかー！！」</span></strong>
といって泣きながら「文字列操作」の「ファイル読込」機能に
「文字コード自動判別機能」を付けたりしてました。
でもUTF-8とマルチバイト文字の確実な判別ってね！
Googleさんにもできないんですよ！！

あと他の新機能、個人的な一押しは
「<strong><span style="color:#CC0000">DataフォルダがなくてもEditor.exeを実行すれば空データを作ってくれる機能</span></strong>」
ですね！　面倒臭いときはDataフォルダ消してEditor起動すればとりあえずなにかができます！
ファイルをEXE内に内蔵したり出したりできる方法を学んだのでこれから色々できます。

ひとまず今月中の公開を目指して引き続き全力で修正していきますので
公開をお楽しみに！　あと2週間以内には出したいです。</div>

</body>
</html>